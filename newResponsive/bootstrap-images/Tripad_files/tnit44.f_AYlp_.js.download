(this.$WP=this.$WP||[]).push(["tnit44",(e,t)=>{var i,a,s,r,n,o,l,u,h,c,d,p,b,m,g,f,v,w,x,y,E,S,C,k,A,N,_,T,O,I,D,q,z,M,B,P,U,R,L,F,$,G,j,X,H,J,Y,W,K,V,Q,Z,ee,et,ei,ea,es,er,en,eo,el,eu,eh,ec,ed,ep,eb,em,eg,ef,ev,ew,ex,ey,eE,eS,eC,ek,eA,eN,e_,eT,eO,eI={init:function(e){void 0===e&&void 0!==eI.zg||(eI.zg=!!e),eI.l||(eI.l=!0)},destroy:function(){eI.l=!1,eI.zg=void 0,eI.vd=void 0},setLogger:function(e){"function"==typeof e?(eI.init(),eI.vd=e):eI.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){eI.init(),eI.zg?eI.zg=!1:eI.zg=!0},info:function(e){if(eI.zg){var t="Braze: "+e;null!=eI.vd?eI.vd(t):console.log(t)}},warn:function(e){if(eI.zg){var t="Braze SDK Warning: "+e+" (v5.6.0)";null!=eI.vd?eI.vd(t):console.warn(t)}},error:function(e){if(eI.zg){var t="Braze SDK Error: "+e+" (v5.6.0)";null!=eI.vd?eI.vd(t):console.error(t)}}},eD={Jn:function(e){for(var t=atob((e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/")),i=new Uint8Array(t.length),a=0;a<t.length;++a)i[a]=t.charCodeAt(a);return i}},eq={CustomEvent:"ce",Pr:"p",mc:"pc",Mu:"i",Li:"ie",xt:"cci",$t:"ccic",lt:"ccc",dt:"ccd",Jl:"ss",Gl:"se",Nr:"si",Cr:"sc",Or:"sbc",zo:"iec",dc:"lr",cc:"uae",yt:"ci",ut:"cc",vc:"lcaa",gc:"lcar",fu:"inc",pu:"add",bu:"rem",au:"set",du:"ncam",bc:"sgu"},ez={Fr:"feed_displayed"},eM={Rt:function(){var e=(e=!1)=>{var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t};return e()+e(!0)+e(!0)+e()}},eB={Oo:"allowCrawlerActivity",Ro:"baseUrl",Lo:"noCookies",Wo:"devicePropertyAllowlist",Da:"disablePushTokenMaintenance",Vo:"enableLogging",Ko:"enableSdkAuthentication",Ca:"manageServiceWorkerExternally",Go:"minimumIntervalBetweenTriggerActionsInSeconds",Yo:"sessionTimeoutInSeconds",Ho:"appVersion",Xo:"appVersionNumber",_a:"serviceWorkerLocation",Ba:"safariWebsitePushId",Ea:"localization",ir:"contentSecurityNonce",er:"allowUserSuppliedJavascript",Jo:"inAppMessageZIndex",Do:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",mh:"requireExplicitInAppMessageDismissal",Zo:"doNotLoadFontAwesome",Qo:"deviceId",Aa:"serviceWorkerScope",Wh:"sdkFlavor",tn:"openCardsInNewTab"};function eP(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&void 0!==e[i]&&t.push(e[i]);return t}function eU(e,t,i,a){var s=eP(e);return -1!==s.indexOf(t)||(ea.error(`${i} Valid values from ${a} are "${s.join('"/"')}".`),!1)}function eR(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function eL(e){return"[object Date]"===Object.prototype.toString.call(e)}function eF(e){return"[object Object]"===Object.prototype.toString.call(e)}function e$(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}function eG(e,t){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var i=e.toString();if(i!==t.toString())return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,r=t.constructor;if(s!==r&&!("function"==typeof s&&s instanceof s&&"function"==typeof r&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1}for(var n=[],o=[],l=n.length;l--;)if(n[l]===e)return o[l]===t;if(n.push(e),o.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!eG(e[l],t[l]))return!1}else{var u,h=e$(e);if(l=h.length,e$(t).length!==l)return!1;for(;l--;)if(u=h[l],!Object.prototype.hasOwnProperty.call(t,u)||!eG(e[u],t[u]))return!1}return n.pop(),o.pop(),!0}function ej(e,t=!1){var i=e/1e3;return t&&(i=Math.floor(i)),i}function eX(e){if(null==e)return null;var t=parseInt(e.toString());return isNaN(t)?null:new Date(1e3*t)}function eH(e){return null!=e&&eL(e)?e.toISOString().replace(/\.[0-9]{3}Z$/,""):e}function eJ(e){return null==e||""===e?null:new Date(e)}function eY(e){return(new Date().valueOf()-e.valueOf())/1e3}function eW(e){return(e.valueOf()-new Date().valueOf())/1e3}var eK="inAppMessage must be an InAppMessage object",eV="must be a Card object",eQ="setCustomUserAttribute",eZ="Braze must be initialized before calling methods.",e0="data-update-subscription-id";function e1(e){var t,i=null==e?void 0:e.ps(td.bs.SE);return i&&(t={label:i.l,name:i.a}),t}var e3=e=>e instanceof Error?e.message:String(e);function e5(e){for(var t=e.length,i=e.length-1;i>=0;i--){var a=e.charCodeAt(i);a>127&&a<=2047?t++:a>2047&&a<=65535&&(t+=2),a>=56320&&a<=57343&&i--}return t}var e2={types:{io:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",co:"openLink",mo:"openLinkInWebView"},properties:{type:"type",eo:"steps",so:"args"}},e4={Qr:"unknownBrazeAction",Vr:"noPushPrompt"},e8=(e,t)=>{switch(e){case e4.Qr:return`${t} contains an unknown braze action type and will not be displayed.`;case e4.Vr:return`${t} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function e7(e){try{var t=e.match(ta),i=t?t[0].length:null,a=i?e.substring(i):null;if(null==i||i>e.length-1||!a)return void ea.error(`Did not find base64 encoded brazeAction in url to process : ${e}`);var s=function(e){try{e=e.replace(/-/g,"+").replace(/_/g,"/");for(var t=window.atob(e),i=new Uint8Array(t.length),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);var s=new Uint16Array(i.buffer);return String.fromCharCode(...s)}catch(e){return ea.error("Unable to decode Base64: "+e),null}}(a);return s?JSON.parse(s):void ea.error(`Failed to decode base64 encoded brazeAction: ${a}`)}catch(t){return void ea.error(`Failed to process brazeAction URL ${e} : ${e3(t)}`)}}function e6(e,t){var i=!1;if(t){for(var a of t)if(i=i||e(a))return!0}return!1}function e9(e){var t=e2.properties.type,i=e2.properties.eo;try{if(null==e)return!0;var a,s=e[t];return s===e2.types.io?e6(e9,e[i]):(a=!1,Object.keys(e2.types).forEach(e=>{e2.types[e]!==s.toString()||(a=!0)}),!a)}catch(e){return!0}}var te=/^[^\x00-\x1F\x22]+$/,tt=/[$.]/,ti=["$add","$update","$remove","$identifier_key","$identifier_value","$new_object","$time","$google_ad_personalization","$google_ad_user_data"],ta=/^brazeActions:\/\/v\d+\//;function ts(e,t,i){var a=null!=e&&"string"==typeof e&&(""===e||null!=e.match(te));return a||ea.error(`Cannot ${t} because ${i} "${e}" is invalid.`),a}function tr(e){return null!=e&&e.match(tt)&&-1===ti.indexOf(e)&&ea.warn("Custom attribute keys cannot contain '$' or '.'"),ts(e,"set custom user attribute","the given key")}function tn(e){var t=typeof e;return null==e||"number"===t||"boolean"===t||eL(e)||"string"===t}function to(e,t,i,a=!1){var s="string"==typeof e||null===e&&a;return s||ea.error(`Cannot ${t} because ${i} "${e}" is invalid.`),s}function tl(e,t,i,a,s){if(null==e&&(e={}),"object"!=typeof e||eR(e))return ea.error(`${t} requires that ${i} be an object. Ignoring ${s}.`),[!1,null];t===eQ?(r=76800,n="75KB"):(r=51200,n="50KB");var r,n,o,l=JSON.stringify(e);if(e5(l)>r)return ea.error(`Could not ${a} because ${i} was greater than the max size of ${n}.`),[!1,null];try{o=JSON.parse(l)}catch(e){return ea.error(`Could not ${a} because ${i} did not contain valid JSON.`),[!1,null]}for(var u in e){if(t===eQ&&!tr(u)||!ts(u,a,`the ${s} property name`))return[!1,null];var h=e[u];if(t!==eQ&&null==h){delete e[u],delete o[u];continue}if(eL(h)&&(o[u]=eH(h)),!function(e,t,i,a,s){var r;return(r=eF(e)||eR(e)?function e(t,i,a){var s=-1!==a;if(s&&a>50)return ea.error("Nested attributes cannot be more than 50 levels deep."),!1;var r=s?a+1:-1;if(eR(t)&&eR(i)){for(var n=0;n<t.length&&n<i.length;n++)if(eL(t[n])&&(i[n]=eH(t[n])),!e(t[n],i[n],r))return!1}else{if(!eF(t))return tn(t);for(var o of e$(t)){var l=t[o];if(s&&!tr(o)||(eL(l)&&(i[o]=eH(l)),!e(l,i[o],r)))return!1}}return!0}(e,t,s?1:-1):tn(e))||ea.error(`Cannot ${i} because ${a} "${e}" is invalid.`),r}(h,o[u],a,`the ${s} property "${u}"`,t===eQ))return[!1,null]}return[!0,o]}function tu(e){if(!(e2.properties.type in e))return!1;switch(e[e2.properties.type]){case e2.types.io:if(e2.properties.eo in e)return!0;break;case e2.types.logCustomEvent:case e2.types.setEmailNotificationSubscriptionType:case e2.types.setPushNotificationSubscriptionType:case e2.types.setCustomUserAttribute:case e2.types.addToSubscriptionGroup:case e2.types.removeFromSubscriptionGroup:case e2.types.addToCustomAttributeArray:case e2.types.removeFromCustomAttributeArray:case e2.types.co:case e2.types.mo:if(e2.properties.so in e)return!0;break;case e2.types.requestPushPermission:return!0}return!1}var th={rO:"Chrome",eO:"Edge",oO:"Opera",Bg:"Safari",OO:"Firefox"},tc={xg:"Android",ao:"iOS",Pg:"Mac",Og:"Windows"},td={iu:{su:"ab.storage.userId",Qo:"ab.storage.deviceId",zl:"ab.storage.sessionId"},bs:{ec:"ab.test",tE:"ab.storage.events",eE:"ab.storage.attributes",sE:"ab.storage.attributes.anonymous_user",Xa:"ab.storage.device",qu:"ab.storage.sdk_metadata",Au:"ab.storage.session_id_for_cached_metadata",Kn:"ab.storage.pushToken",Be:"ab.storage.newsFeed",Ge:"ab.storage.lastNewsFeedRefresh",Ct:"ab.storage.cardImpressions",fl:"ab.storage.serverConfig",rE:"ab.storage.triggers",oE:"ab.storage.triggers.ts",Wl:"ab.storage.messagingSessionStart",wi:"ab.storage.cc",gi:"ab.storage.ccLastFullSync",yi:"ab.storage.ccLastCardUpdated",_u:"ab.storage.globalRateLimitCurrentTokenCount",Ju:"ab.storage.dynamicRateLimitCurrentTokenCount",ot:"ab.storage.ccClicks",vt:"ab.storage.ccImpressions",gt:"ab.storage.ccDismissals",nE:"ab.storage.lastDisplayedTriggerTimesById",aE:"ab.storage.lastDisplayedTriggerTime",iE:"ab.storage.triggerFireInstancesById",qh:"ab.storage.signature",Fi:"ab.storage.brazeSyncRetryCount",Di:"ab.storage.sdkVersion",Yi:"ab.storage.ff",we:"ab.storage.ffImpressions",ke:"ab.storage.ffLastRefreshAt",xe:"ab.storage.ff.sessionId",EE:"ab.storage.lastReqToEndpoint",lE:"ab.storage.requestAttempts",cn:"ab.storage.deferredIam",xu:"ab.storage.lastSdkReq",SE:"ab.storage.alias",gs:"ab.storage.banners",xs:"ab.storage.banners.impressions",ys:"ab.storage.banners.sessionId"},ae:"ab.optOut"},tp={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"},tb={Su:"invalid_api_key",Bu:"blacklisted",wu:"no_device_identifier",ku:"invalid_json_response",Tu:"empty_response"},tm={O:{Xu:"data",Pi:"content_cards/sync",De:"feature_flags/sync",sn:"template",K:"banners/sync"},el:e=>null==e?void 0:e.ps(td.bs.EE),Ac:e=>null==e?void 0:e.ps(td.bs.lE),Rc:(e,t)=>{null==e||e.js(td.bs.EE,t)},qc:(e,t)=>{null==e||e.js(td.bs.lE,t)},Eu:(e,t)=>{if(!e||!t)return -1;var i=tm.el(e);if(null==i)return -1;var a=i[t];return null==a||isNaN(a)?-1:a},Fu:(e,t)=>{var i=1;if(!e||!t)return i;var a=tm.Ac(e);return null==a?i:null==(i=a[t])||isNaN(i)?1:i},W:(e,t,i)=>{if(e&&t){var a=tm.el(e);null==a&&(a={}),a[t]=i,tm.Rc(e,a)}},ns:(e,t,i)=>{if(e&&t){var a=tm.Ac(e);null==a&&(a={}),a[t]=i,tm.qc(e,a)}},hs:(e,t)=>{if(e&&t){var i=tm.Fu(e,t);tm.ns(e,t,i+1)}}},tg={Y:e=>{var t,i;try{var a=!1;if(window.XMLHttpRequest&&(a=!0),!a)return void ea.error("This browser does not have any supported ajax options!");t=new XMLHttpRequest;var s=()=>{"function"==typeof e.error&&e.error(t.status),"function"==typeof e.os&&e.os(!1)};for(var r of(t.onload=()=>{var i,a;if(4===t.readyState){if(t.status>=200&&t.status<300||304===t.status){if("function"==typeof e.ss){try{i=JSON.parse(t.responseText),a=t.getAllResponseHeaders()}catch(i){var r={error:""===t.responseText?tb.Tu:tb.ku,response:t.responseText};(0,e.ss)(r,a)}i&&e.ss(i,a)}"function"==typeof e.os&&e.os(!0)}else s()}},t.onerror=()=>{s()},t.ontimeout=()=>{s()},i=JSON.stringify(e.data),t.open("POST",e.url,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.headers||[]))t.setRequestHeader(r[0],r[1]);t.send(i)}catch(e){ea.error(`Network request error: ${e3(e)}`)}}},tf=(e,t)=>(e=Math.ceil(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e),tv={Un:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,_n:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>tv.Un()||tv._n(),isPushBlocked:()=>{var e=tv.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,t=tv.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return e||t},isPushPermissionGranted:()=>tv.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Ur:()=>!tv.isPushBlocked()&&tv.isPushSupported()&&!tv.isPushPermissionGranted()},tw={La:function(e,t=!1){var i,a=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(td.bs.ec,"true"),localStorage.getItem(td.bs.ec)&&(localStorage.removeItem(td.bs.ec),a=!0)}catch(e){if(!(e instanceof Error&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0))throw e;a=!0}}catch(e){ea.info("Local Storage not supported!")}var s=tw.oc(),r=new g.tc(e,s&&!t,a);return i=a?new g.rc(e):new g.ac,new g(r,i)},oc:function(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}};function tx(e,t=!1,i=!1,a=!1){if(null==e)return!1;t=t||!1,i=i||!1;var s=e.getBoundingClientRect();return null!=s&&(s.top>=0&&s.top<=(window.innerHeight||document.documentElement.clientHeight)||!t)&&(s.left>=0||!a)&&(s.bottom>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(s.right<=(window.innerWidth||document.documentElement.clientWidth)||!a)}var ty={wo:"up",vo:"down",kt:"left",Ht:"right"};function tE(){if(null==ed.Ic){ed.Ic=!1;try{var e=Object.defineProperty({},"passive",{get:()=>{ed.Ic=!0}});window.addEventListener("testPassive",()=>{},e),window.removeEventListener("testPassive",()=>{},e)}catch(e){ea.error(e3(e))}}return ed.Ic}function tS(e,t,i=()=>{}){e.addEventListener(t,i,!!tE()&&{passive:!0})}function tC(e){if(e.onclick){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.onclick.apply(e,[t])}}function tk(e,t,i){var a=null,s=null;tS(e,"touchstart",e=>{a=e.touches[0].clientX,s=e.touches[0].clientY}),tS(e,"touchmove",r=>{if(null!=a&&null!=s){var n=a-r.touches[0].clientX,o=s-r.touches[0].clientY;Math.abs(n)>Math.abs(o)&&Math.abs(n)>=25?((n>0&&t===ty.kt||n<0&&t===ty.Ht)&&i(r),a=null,s=null):Math.abs(o)>=25&&((o>0&&t===ty.wo&&e.scrollTop===e.scrollHeight-e.offsetHeight||o<0&&t===ty.vo&&0===e.scrollTop)&&i(r),a=null,s=null)}})}function tA(e,t,i){var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"svg");s.setAttribute("viewBox",e),s.setAttribute("xmlns",a);var r=document.createElementNS(a,"path");return r.setAttribute("d",t),null!=i&&r.setAttribute("fill",i),s.appendChild(r),s}var tN={To:32,yo:9,_o:13,_h:27},t_=e=>null!==e&&"IFRAME"===e.tagName;function tT(e){if(!e)return null;if(e.is_control)return N.fromJson(e);var t,i=e.type;null!=i&&(i=i.toUpperCase());var a=e.message,s=e.text_align_message,r=e.slide_from,n=e.extras,o=e.trigger_id,l=e.click_action,u=e.uri,h=e.open_target,c=e.message_close,d=e.duration,p=e.icon,b=e.image_url,m=e.image_style,g=e.icon_color,f=e.icon_bg_color,v=e.bg_color,w=e.text_color,x=e.close_btn_color,y=e.header,E=e.text_align_header,S=e.header_text_color,C=e.frame_color,k=[],A=e.btns;null==A&&(A=[]);for(var z=0;z<A.length;z++)k.push(O.fromJson(A[z]));var M=e.crop_type,B=e.orientation,P=e.animate_in,U=e.animate_out,R=e.html_id,L=e.css;null!=R&&""!==R&&null!=L&&""!==L||(R=void 0,L=void 0);var F=e.message_extras;if(i===D.Dt||i===_.Qe.xo)t=new D(a,s,n,o,l,u,h,c,d,p,b,m,g,f,v,w,x,P,U,y,E,S,C,k,M,R,L,F);else if(i===I.Dt)t=new I(a,s,n,o,l,u,h,c,d,p,b,m,g,f,v,w,x,P,U,y,E,S,C,k,M,B,R,L,F);else if(i===q.Dt)t=new q(a,s,r,n,o,l,u,h,c,d,p,b,g,f,v,w,x,P,U,R,L,F);else{if(i!==T.Dt&&i!==_.Qe.Le&&i!==_.Qe.Io)return void ea.error("Ignoring message with unknown type "+i);var $=e.message_fields;(t=new T(a,n,o,c,d,P,U,C,R,L,$,F)).trusted=e.trusted||!1}return t.Ke=i,t}function tO(e){var t=[];for(var i of e)t.push(new O(i.text,i.backgroundColor,i.textColor,i.borderColor,i.clickAction,i.uri,i.id));return t}var tI={OPEN:"open",Rr:"purchase",kr:"push_click",ve:"custom_event",Ao:"iam_click",Xt:"test"};function tD(e,t,i){var a=e||document.querySelector("head"),s=`ab-${t}-css-definitions-${"5.6.0".replace(/\./g,"-")}`;if(a){var r=a.ownerDocument||document;if(null==r.getElementById(s)){var n=r.createElement("style");n.innerHTML=i||"",n.id=s;var o=ef.sr(t8.ir);null!=o&&n.setAttribute("nonce",o),a.appendChild(n)}}}function tq(){if(!ef.sr(t8.Zo)){var e="https://use.fontawesome.com/7f85a56ba4.css";if(!(null!==document.querySelector('link[rel=stylesheet][href="'+e+'"]'))){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)}}}function tz(e,t,i,a="ltr"){var s=document.createElement("button");s.setAttribute("aria-label",e),s.setAttribute("tabindex","0"),s.setAttribute("role","button"),s.dir=a,tS(s,"touchstart"),s.className="ab-close-button";var r=tA("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",t);return s.appendChild(r),s.addEventListener("keydown",e=>{e.keyCode!==tN.To&&e.keyCode!==tN._o||(i(),e.stopPropagation())}),s.onclick=e=>{i(),e.stopPropagation()},s}function tM(e,t){return null==e||isNaN(e=parseInt(e.toString()))?"":(t&&!isNaN(parseFloat(t.toString()))||(t=1),"rgba("+[(16711680&(e>>>=0))>>>16,(65280&e)>>>8,255&e,((4278190080&e)>>>24)/255*t].join(",")+")")}function tB(e){if(!ef.rr())return!1;if(!(e instanceof _||e instanceof N))return ea.error(eK),!1;var t=e instanceof N?eq.zo:eq.Nr;return eg.ea().ds(e,t).ss}function tP(e){if(!ef.rr())return!1;if(!(e instanceof _))return ea.error(eK),!1;var t=eg.ea().ds(e,eq.Cr);if(t){e.ko()||tB(e);for(var i=0;i<t.fe.length;i++)t4.m().ue(tI.Ao,[e.triggerId],t.fe[i])}return t.ss}var tU={PORTRAIT:0,LANDSCAPE:1};function tR(){return screen.width<=600}function tL(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?tU.LANDSCAPE:tU.PORTRAIT;var e=window;if("screen"in e){var t=e.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=t&&"object"==typeof t&&(t=t.type),"landscape-primary"===t||"landscape-secondary"===t?tU.LANDSCAPE:tU.PORTRAIT}return tU.PORTRAIT}function tF(e,t,i){e&&(t||null!=i&&i.metaKey?window.open(e):window.location=e)}function t$(){return window.location.href}function tG(){if(ef.rr())return ef.cr()}function tj(e,t,i){if(ef.rr()){if(ta.test(e)){var a=e7(e);if(a){var s=e=>{if(!tu(e))return void ea.error(`Decoded Braze Action json is invalid: ${JSON.stringify(e,null,2)}`);var t=e2.properties.type,i=e2.properties.eo,a=e2.properties.so,r=e[t];if(r===e2.types.io)for(var n of e[i])s(n);else{var o,l,u=e[a];switch(r){case e2.types.logCustomEvent:Promise.resolve().then(function(){return ey}).then(({logCustomEvent:e})=>{ef.nt()?e(...l=Array.prototype.slice.call(u)):ea.error(eZ)});break;case e2.types.requestPushPermission:Promise.resolve().then(function(){return eN}).then(({requestPushPermission:e})=>{ef.nt()?"Safari"===eo.browser&&eo.OS===tc.ao?window.navigator.standalone&&e():e():ea.error(eZ)});break;case e2.types.setEmailNotificationSubscriptionType:case e2.types.setPushNotificationSubscriptionType:case e2.types.setCustomUserAttribute:case e2.types.addToSubscriptionGroup:case e2.types.removeFromSubscriptionGroup:case e2.types.addToCustomAttributeArray:case e2.types.removeFromCustomAttributeArray:(o=tG())&&o[r](...Array.prototype.slice.call(u));break;case e2.types.co:case e2.types.mo:l=Array.prototype.slice.call(u),ep.openUri(...l);break;default:ea.info(`Ignoring unknown Braze Action: ${r}`)}}};s(a)}}else ep.openUri(e,t,i)}}function tX(e){null==e&&(e="");var t=e.split("?").slice(1).join("?"),i={};if(null!=t)for(var a=t.split("&"),s=0;s<a.length;s++){var r=a[s].split("=");""!==r[0]&&(i[r[0]]=r[1])}return i}function tH(e){return!(!e||0!==(e=e.toString().toLowerCase()).lastIndexOf("javascript:",0)&&0!==e.lastIndexOf("data:",0))}function tJ(e,t,i){if(!ef.rr())return!1;if(!(e instanceof T))return ea.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;var a=eq.Cr;null!=t&&(a=eq.Or);var s=eg.ea().ds(e,a,t,i);if(s.ss)for(var r=0;r<s.fe.length;r++)t4.m().ue(tI.Ao,[e.triggerId,t],s.fe[r]);return s.ss}var tY=(e,t,i,a)=>{var s=i.getAttribute("href"),r=i.onclick;return n=>{if(null==r||"function"!=typeof r||!1!==r.bind(i)(n)){var o=tX(s).abButtonId;if(null!=o&&""!==o||(o=i.getAttribute("id")||void 0),null!=s&&""!==s&&0!==s.indexOf("#")){var l="blank"===(i.getAttribute("target")||"").toLowerCase().replace("_",""),u=a||e.openTarget===_.OpenTarget.BLANK||l,h=()=>{tJ(e,o,s),ep.openUri(s,u,n)};u?h():e.ll(t,h)}else tJ(e,o,s||void 0);return n.stopPropagation(),!1}}},tW=(e,t,i)=>{var a={display:{},web:{}},s=function(){return function(){var e=arguments;Promise.resolve().then(function(){return eN}).then(t=>{ef.nt()?t.requestPushPermission(...Array.prototype.slice.call(e)):ea.error(eZ)})}},r={requestImmediateDataFlush:function(){var e=arguments;Promise.resolve().then(function(){return eS}).then(({requestImmediateDataFlush:t})=>{ef.nt()?t(...Array.prototype.slice.call(e)):ea.error(eZ)})},logCustomEvent:function(){var e=arguments;Promise.resolve().then(function(){return ey}).then(({logCustomEvent:t})=>{if(!ef.nt())return void ea.error(eZ);t(...Array.prototype.slice.call(e))})},logPurchase:function(){var e=arguments;Promise.resolve().then(function(){return eE}).then(({logPurchase:t})=>{if(!ef.nt())return void ea.error(eZ);t(...Array.prototype.slice.call(e))})},unregisterPush:function(){var e=arguments;Promise.resolve().then(function(){return e_}).then(({unregisterPush:t})=>{ef.nt()?t(...Array.prototype.slice.call(e)):ea.error(eZ)})},requestPushPermission:s(),changeUser:function(){var e=arguments;Promise.resolve().then(function(){return ex}).then(({changeUser:t})=>{if(!ef.nt())return void ea.error(eZ);t(...Array.prototype.slice.call(e))})}},n=function(e){return function(){r[e](...Array.prototype.slice.call(arguments))}};for(var o of e$(r))a[o]=n(o);for(var l=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup"],u=function(e){return function(){var t=tG();t&&t[e](...Array.prototype.slice.call(arguments))}},h={},c=0;c<l.length;c++)h[l[c]]=u(l[c]);a.getUser=function(){return h};var d={showFeed:t},p=function(t){return function(){var a=arguments;"function"!=typeof i?d[t](...Array.prototype.slice.call(a)):i(e,function(){d[t](...Array.prototype.slice.call(a))})}},b=a.display;for(var m of e$(d))b[m]=p(m);var g={registerAppboyPushMessages:s()},f=function(e){return function(){g[e](...Array.prototype.slice.call(arguments))}},v=a.web;for(var w of e$(g))v[w]=f(w);return a},tK=(e,t,i)=>{var a=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${i}['"]\\)`,s=e.match(new RegExp(a));if(s){var r=`${s[1]}.setAttribute("nonce", "${t}")`;return`${e.slice(0,s.index+s[0].length)};${r};${e.slice(s.index+s[0].length)}`}return null},tV=(e,t,i)=>{var a=null;if(null!=i){(a=document.createElement("html")).innerHTML=t||"";for(var s=a.getElementsByTagName("style"),r=0;r<s.length;r++)s[r].setAttribute("nonce",i);for(var n=a.getElementsByTagName("script"),o=0;o<n.length;o++){n[o].setAttribute("nonce",i),n[o].innerHTML=n[o].innerHTML.replace(/<style>/g,`<style nonce='${i}'>`);var l=tK(n[o].innerHTML,i,"script");l&&(n[o].innerHTML=l);var u=tK(n[o].innerHTML,i,"style");u&&(n[o].innerHTML=u)}}e.srcdoc=a?a.innerHTML:t||""};function tQ(e,t){if(!ef.rr())return!1;if(!(e instanceof O))return ea.error("button must be an InAppMessageButton object"),!1;if(!(t instanceof _))return ea.error(eK),!1;var i,a=eg.ea().Hr(e,t);if(a.ss)for(var s=0;s<a.fe.length;s++)t4.m().ue(tI.Ao,[t.triggerId,null===(i=e.id)||void 0===i?void 0:i.toString()],a.fe[s]);return a.ss}var tZ={ho:e=>{for(var t=e.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button"),i=0;i<t.length;i++)t[i].tabIndex=0;if(t.length>0){var a=t[0],s=t[t.length-1];e.addEventListener("keydown",t=>{var i=document.activeElement;t.keyCode!==tN.yo||(t.shiftKey||i!==s&&i!==e?t.shiftKey&&(i===a||i===e)&&(t.preventDefault(),s.focus()):(t.preventDefault(),a.focus()))})}},jo:(e,t)=>{t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-label","Modal Message"),e&&t.setAttribute("aria-labelledby",e)},fo:(e,t,i,a)=>{if(e.buttons&&e.buttons.length>0){var s=document.createElement("div");s.className="ab-message-buttons",i.appendChild(s);var r=i.getElementsByClassName("ab-message-text")[0];null!=r&&(r.className+=" ab-with-buttons");for(var n=s=>r=>(e.ll(i,()=>{tQ(s,e),s.clickAction===_.ClickAction.URI?tj(s.uri||"",a||e.openTarget===_.OpenTarget.BLANK,r):s.clickAction===_.ClickAction.NEWS_FEED&&t()}),r.stopPropagation(),!1),o=0;o<e.buttons.length;o++){var l=e.buttons[o],u=document.createElement("button");u.className="ab-message-button",u.setAttribute("type","button"),tS(u,"touchstart");var h=l.text;""===l.text&&(h="\xa0"),u.appendChild(document.createTextNode(h)),e.Oe()||(u.style.backgroundColor=tM(l.backgroundColor),u.style.color=tM(l.textColor),u.style.borderColor=tM(l.borderColor)),u.onclick=n(l),s.appendChild(u)}}}},t0={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"ليس لدينا أي تحديث. يرجى التحقق مرة أخرى لاحقاً",FEED_TIMEOUT_MESSAGE:"يرجى تكرار المحاولة لاحقا"},cs:{NO_CARDS_MESSAGE:"V tuto chv\xedli pro v\xe1s nem\xe1me ž\xe1dn\xe9 aktualizace.<br/>Zkontrolujte pros\xedm znovu později.",FEED_TIMEOUT_MESSAGE:"Pros\xedm zkuste to znovu později."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Pr\xf8v venligst senere.",FEED_TIMEOUT_MESSAGE:"Pr\xf8v venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verf\xfcgbar.<br/>Bitte sp\xe4ter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte sp\xe4ter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor compru\xe9belo m\xe1s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor int\xe9ntelo m\xe1s tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizaci\xf3n.<br/>Vuelva a verificar m\xe1s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo m\xe1s tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"P\xe4ivityksi\xe4 ei ole saatavilla.<br/>Tarkista my\xf6hemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yrit\xe4 my\xf6hemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise \xe0 jour disponible.<br/>Veuillez v\xe9rifier ult\xe9rieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez r\xe9essayer ult\xe9rieurement."},he:{NO_CARDS_MESSAGE:".אין לנו עדכונים. בבקשה בדוק שוב בקרוב",FEED_TIMEOUT_MESSAGE:".בבקשה נסה שוב בקרוב"},hi:{NO_CARDS_MESSAGE:"हमारे पास कोई अपडेट नहीं हैं। कृपया बाद में फिर से जाँच करें.।",FEED_TIMEOUT_MESSAGE:"कृपया बाद में दोबारा प्रयास करें।."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare pi\xf9 tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare pi\xf9 tardi."},ja:{NO_CARDS_MESSAGE:"アップデートはありません。<br/>後でもう一度確認してください。",FEED_TIMEOUT_MESSAGE:"後でもう一度試してください。"},ko:{NO_CARDS_MESSAGE:"업데이트가 없습니다. 다음에 다시 확인해 주십시오.",FEED_TIMEOUT_MESSAGE:"나중에 다시 시도해 주십시오."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst pr\xf8v igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Proszę sprawdzić ponownie p\xf3źniej.",FEED_TIMEOUT_MESSAGE:"Proszę spr\xf3bować ponownie p\xf3źniej."},pt:{NO_CARDS_MESSAGE:"N\xe3o temos atualiza\xe7\xf5es.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"N\xe3o temos nenhuma atualiza\xe7\xe3o.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:"Обновления недоступны.<br/>Пожалуйста, проверьте снова позже.",FEED_TIMEOUT_MESSAGE:"Пожалуйста, повторите попытку позже."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>F\xf6rs\xf6k igen senare.",FEED_TIMEOUT_MESSAGE:"F\xf6rs\xf6k igen senare."},th:{NO_CARDS_MESSAGE:"เราไม่มีการอัพเดต กรุณาตรวจสอบภายหลัง.",FEED_TIMEOUT_MESSAGE:"กรุณาลองใหม่ภายหลัง."},uk:{NO_CARDS_MESSAGE:"Оновлення недоступні.<br/>ласка, перевірте знову пізніше.",FEED_TIMEOUT_MESSAGE:"Будь ласка, спробуйте ще раз пізніше."},vi:{NO_CARDS_MESSAGE:"Ch\xfang t\xf4i kh\xf4ng c\xf3 cập nhật n\xe0o.<br/>Vui l\xf2ng kiểm tra lại sau.",FEED_TIMEOUT_MESSAGE:"Vui l\xf2ng thử lại sau."},"zh-hk":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-hans":{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."},"zh-hant":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-tw":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},zh:{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."}},t1={l:!1,aa:null,ea:()=>{if(t1.p(),!t1.aa){var e=eo.language,t=!1;ef.sr(t8.Ea)&&(e=ef.sr(t8.Ea),t=!0),t1.aa=new j(e,t)}return t1.aa},p:()=>{t1.l||(ef.h(t1),t1.l=!0)},destroy:()=>{t1.aa=null,t1.l=!1}};function t3(e,t,i){if(ef.rr()){if(tD(void 0,"iam",".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:9011;-webkit-tap-highlight-color:transparent}.ab-iam-root.v3:focus{outline:0}.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:9011;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333;color-scheme:normal}.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text[dir=rtl]{border-width:5px 10px 5px 25px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{width:auto;max-height:720px;max-width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-iam-root.v3 .ab-centered{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9001;pointer-events:all;background-color:rgba(51,51,51,.75)}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}"),tq(),null==e)return!1;if(e instanceof N)return ea.info("User received control for a multivariate test, logging to Braze servers."),tB(e),!0;if(!(e instanceof _)||e.constructor===_)return!1;e.Lh();var a,s=e instanceof T;if(s&&!e.trusted&&!ef.nr())return ea.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),!1;if(null==t&&(t=document.body),e.Ye()&&t.querySelectorAll(".ab-modal-interactions").length>0)return ea.info(`Cannot show in-app message ${e.message} because another message is being shown.`),!1;if(ep.Uo()){var r=ep.$o();if(r===tU.PORTRAIT&&e.orientation===_.Orientation.LANDSCAPE||r===tU.LANDSCAPE&&e.orientation===_.Orientation.PORTRAIT){var n=r===tU.PORTRAIT?"portrait":"landscape",o=e.orientation===_.Orientation.PORTRAIT?"portrait":"landscape";return ea.info(`Not showing ${o} in-app message ${e.message} because the screen is currently ${n}`),!1}}if(!ef.nr()){var l=!1;if(e.buttons&&e.buttons.length>0)for(var u=e.buttons,h=0;h<u.length;h++)u[h].clickAction===_.ClickAction.URI&&(l=tH(u[h].uri));else e.clickAction===_.ClickAction.URI&&(l=tH(e.uri));if(l)return ea.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),!1}var c=document.createElement("div");if(c.className="ab-iam-root v3",c.className+=(a="",e.animateIn&&(a+=" ab-animate-in"),e.animateOut&&(a+=" ab-animate-out"),e instanceof I?a+=" ab-effect-fullscreen":e instanceof T?a+=" ab-effect-html":e instanceof D?a+=" ab-effect-modal":e instanceof q&&(a+=" ab-effect-slide"),a),c.setAttribute("role","complementary"),e.Ve()&&(c.id=e.htmlId),ef.sr(t8.Jo)&&(c.style.zIndex=(ef.sr(t8.Jo)+1).toString()),t.appendChild(c),e.Oe()){var d=document.createElement("style");d.innerHTML=e.css,d.id=e._e(),null!=ef.sr(t8.ir)&&d.setAttribute("nonce",ef.sr(t8.ir)),document.getElementsByTagName("head")[0].appendChild(d)}var p=e instanceof q,b=function(e,t,i,a,s,r,n,o=document.body,l="ltr"){if(e.Xe=document.activeElement,e instanceof T)return function(e,t,i,a,s,r){var n=document.createElement("iframe");if(n.setAttribute("title","Modal Message"),s&&(n.style.zIndex=(s+1).toString()),tV(n,e.message,r),n.onload=()=>{var s=n.contentWindow;s.focus();var o=s.document.getElementsByTagName("head")[0];if(null!=o){if(e.Oe()){var l=document.createElement("style");l.innerHTML=e.css||"",l.id=e._e()||"",null!=r&&l.setAttribute("nonce",r),o.appendChild(l)}var u=s.document.createElement("base");null!=u&&(u.setAttribute("target","_parent"),o.appendChild(u))}var h=s.document.getElementsByTagName("title");h&&h.length>0&&n.setAttribute("title",h[0].textContent||"");var c=Object.assign(Object.assign({},tW(n,t,(t,i)=>e.ll(t,i))),{closeMessage:function(){e.ll(n)},logClick:function(){tJ(e,...arguments)}});if(s.appboyBridge=c,s.brazeBridge=c,e.Ke!==_.Qe.Le){for(var d=s.document.getElementsByTagName("a"),p=0;p<d.length;p++)d[p].onclick=tY(e,n,d[p],a);for(var b=s.document.getElementsByTagName("button"),m=0;m<b.length;m++)b[m].onclick=tY(e,n,b[m],a)}var g=s.document.body;if(null!=g){e.Ve()&&(g.id=e.htmlId||"");var f=document.createElement("hidden");f.onclick=c.closeMessage,f.className="ab-programmatic-close-button",g.appendChild(f)}s.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==n.className.indexOf("ab-start-hidden")&&(n.className=n.className.replace("ab-start-hidden",""),i(n))},n.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",eo.OS===tc.ao){var o=document.createElement("div");return o.className="ab-ios-scroll-wrapper",o.appendChild(n),e.We=o,o}return e.We=n,n}(e,t,i,s,r,n);var u=function(e,t,i,a,s,r,n=document.body,o="ltr"){var l,u=null,h=document.createElement("div");h.dir=o,h.className="ab-in-app-message ab-start-hidden ab-background",r&&(h.style.zIndex=(r+1).toString()),e.Ye()&&(h.className+=" ab-modal-interactions",h.setAttribute("tabindex","-1")),e.Oe()||(h.style.color=tM(e.textColor),h.style.backgroundColor=tM(e.backgroundColor),null==(l=e.backgroundColor)||isNaN(l=parseInt(l.toString()))||(4278190080&l)>>>24!=0||(h.className+=" ab-no-shadow"));var c=()=>{-1!==h.className.indexOf("ab-start-hidden")&&(h.className=h.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?a(`Cannot show in-app message ${e.message} because another message is being shown.`,_.lo.Ze):i(h))},d=(t=!0)=>{var i=document.querySelectorAll(".ab-iam-root");i&&0!==i.length||(i=n.querySelectorAll(".ab-iam-root")),i&&i.length>0&&(i[0].classList.remove("ab-iam-img-loading"),u&&(clearTimeout(u),u=null),t?c():ea.error(`Cannot show in-app message ${e.message} because the image failed to load.`))};e.imageStyle===_.ImageStyle.GRAPHIC&&(h.className+=" graphic"),e.orientation===_.Orientation.LANDSCAPE&&(h.className+=" landscape"),null!=e.buttons&&0===e.buttons.length&&(e.clickAction!==_.ClickAction.NONE&&(h.className+=" ab-clickable"),h.onclick=i=>(e.ll(h,()=>{tP(e),e.clickAction===_.ClickAction.URI?tj(e.uri||"",s||e.openTarget===_.OpenTarget.BLANK,i):e.clickAction===_.ClickAction.NEWS_FEED&&t()}),i.stopPropagation(),!1));var p=tz("Close Message",e.Oe()?void 0:tM(e.closeButtonColor),()=>{e.ll(h)},o);h.appendChild(p),r&&(p.style.zIndex=(r+2).toString());var b=document.createElement("div");b.className="ab-message-text",b.dir=o;var m=(e.messageAlignment||e.do).toLowerCase();b.className+=" "+m+"-aligned";var g=!1,f=document.createElement("div");if(f.className="ab-image-area",e.imageUrl){if(e.cropType===_.CropType.CENTER_CROP){var v=document.createElement("span");v.className="ab-center-cropped-img",v.style.backgroundImage="url("+e.imageUrl+")",v.setAttribute("role","img"),v.setAttribute("aria-label","Modal Image"),e.uo(v),f.appendChild(v)}else{var w=document.createElement("img");if(w.setAttribute("src",e.imageUrl),e.uo(w),0===document.querySelectorAll(".ab-iam-img-loading").length){g=!0;var x=document.querySelectorAll(".ab-iam-root");x&&x.length>0&&x[0].classList.add("ab-iam-img-loading"),u=window.setTimeout(()=>{d(!1)},6e4),w.onload=()=>{d()},w.onerror=()=>{d(!1)}}f.appendChild(w)}h.appendChild(f),b.className+=" ab-with-image"}else if(e.icon){f.className+=" ab-icon-area";var y=document.createElement("span");y.className="ab-icon",e.Oe()||(y.style.backgroundColor=tM(e.iconBackgroundColor),y.style.color=tM(e.iconColor));var E=document.createElement("i");E.className="fa",E.appendChild(document.createTextNode(e.icon)),E.setAttribute("aria-hidden","true"),y.appendChild(E),f.appendChild(y),h.appendChild(f),b.className+=" ab-with-icon"}if(tS(b,"touchstart"),e.header&&e.header.length>0){var S=document.createElement("h1");S.className="ab-message-header",e.bo=er.Rt(),S.id=e.bo;var C=(e.headerAlignment||_.TextAlignment.CENTER).toLowerCase();S.className+=" "+C+"-aligned",e.Oe()||(S.style.color=tM(e.headerTextColor)),S.appendChild(document.createTextNode(e.header)),b.appendChild(S)}return b.appendChild(e.po()),h.appendChild(b),g||c(),e.We=h,h}(e,t,i,a,s,r,o,l);if(e instanceof I||e instanceof D){var h=e instanceof I?"ab-fullscreen":"ab-modal";u.className+=` ${h} ab-centered`,eb.fo(e,t,u,s),eb.ho(u),eb.jo(e.bo,u)}else if(e instanceof q){u.className+=" ab-slideup";var c,d,p=u.getElementsByClassName("ab-close-button")[0];if(null!=p){var b=tA("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",e.Oe()?void 0:tM(e.closeButtonColor));b.setAttribute("class","ab-chevron"),p.appendChild(b)}tk(u,ty.kt,e=>{u.className+=" ab-swiped-left",null!=p&&null!=p.onclick&&p.onclick(e)}),tk(u,ty.Ht,e=>{u.className+=" ab-swiped-right",null!=p&&null!=p.onclick&&p.onclick(e)}),e.slideFrom===_.SlideFrom.TOP?(c=ty.wo,d=" ab-swiped-up"):(c=ty.vo,d=" ab-swiped-down"),tk(u,c,e=>{u.className+=d,null!=p&&null!=p.onclick&&p.onclick(e)})}return u}(e,()=>{Promise.resolve().then(function(){return ek}).then(e=>{ef.nt()?e.showFeed():ea.error(eZ)})},t=>{if(e.Ye()&&e.Bo()){var a=document.createElement("div");if(a.className="ab-page-blocker",e.Oe()||(a.style.backgroundColor=tM(e.frameColor)),ef.sr(t8.Jo)&&(a.style.zIndex=ef.sr(t8.Jo).toString()),c.appendChild(a),!ef.sr(t8.mh)){var r=new Date().valueOf();a.onclick=i=>{new Date().valueOf()-r>_.ph&&(e.ll(t),i.stopPropagation())}}c.appendChild(t),t.focus(),e.Ah(c)}else if(p){for(var n=document.querySelectorAll(".ab-slideup"),o=null,l=n.length-1;l>=0;l--)if(n[l]!==t){o=n[l];break}if(e.slideFrom===_.SlideFrom.TOP){var u=0;null!=o&&(u=o.offsetTop+o.offsetHeight),t.style.top=Math.max(u,0)+"px"}else{var h=0;null!=o&&(h=(window.innerHeight||document.documentElement.clientHeight)-o.offsetTop),t.style.bottom=Math.max(h,0)+"px"}}else s&&!ef.sr(t8.mh)&&t_(t)&&t.contentWindow&&t.contentWindow.addEventListener("keydown",function(t){t.keyCode===tN._h&&e.closeMessage()});tB(e),e.dismissType===_.DismissType.AUTO_DISMISS&&setTimeout(()=>{c.contains(t)&&e.ll(t)},e.duration),"function"==typeof i&&i()},e=>{ea.info(e)},ef.sr(t8.Do),ef.sr(t8.Jo),ef.sr(t8.ir),t,em.ea().So());return(s||p)&&(c.appendChild(b),e.Ah(c)),!0}}function t5(e){if(ef.rr())return"function"!=typeof e?null:eg.ea().qr(function(t){return e(t[0]),t.slice(1)})}var t2={aa:null,l:!1,ea:()=>(t2.p(),t2.aa||(t2.aa=new X(ef.g(),ef.P(),ef.j(),ef.tr())),t2.aa),p:()=>{t2.l||(ef.h(t2),t2.l=!0)},destroy:()=>{t2.aa=null,t2.l=!1}},t4={l:!1,provider:null,m:()=>(t4.p(),t4.provider||t4.rg(),t4.provider),rg:()=>{if(!t4.provider){var e=ef.sr(t8.Go);t4.provider=new J(null!=e?e:30,eg.ea()._r(),ef.j(),ef.nn(),eg.ea()),ef._(t4.provider)}},p:()=>{t4.l||(t4.rg(),ef.h(t4),t4.l=!0)},destroy:()=>{t4.provider=null,t4.l=!1}},t8={Oo:"allowCrawlerActivity",Ro:"baseUrl",Lo:"noCookies",Da:"disablePushTokenMaintenance",Vo:"enableLogging",Ko:"enableSdkAuthentication",Ca:"manageServiceWorkerExternally",Go:"minimumIntervalBetweenTriggerActionsInSeconds",Yo:"sessionTimeoutInSeconds",Ho:"appVersion",Xo:"appVersionNumber",_a:"serviceWorkerLocation",Ba:"safariWebsitePushId",Ea:"localization",ir:"contentSecurityNonce",er:"allowUserSuppliedJavascript",Jo:"inAppMessageZIndex",Do:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",mh:"requireExplicitInAppMessageDismissal",Zo:"doNotLoadFontAwesome",Qo:"deviceId",Aa:"serviceWorkerScope",Wh:"sdkFlavor"},t7={ds:(e,t,i)=>{var a,s,r=new E,n=ef.P();if(!n)return ea.info(`Not logging event with type "${e}" because the current session ID could not be found.`),r;var o=n.qo();return r.fe.push(new u(i||(null===(a=ef.tr())||void 0===a?void 0:a.getUserId()),e,new Date().valueOf(),o,t)),r.ss=(null===(s=ef.j())||void 0===s?void 0:s.Eo(r.fe))||!1,r}},t6={l:!1,aa:null,ea:()=>(t6.p(),t6.aa||(t6.aa=new K(ef.j())),t6.aa),p:()=>{t6.l||(ef.h(t6),t6.l=!0)},destroy:()=>{t6.aa=null,t6.l=!1}};function t9(e,t){return!!ef.rr()&&(e instanceof s?ew.ea().logClick(e,t).ss:(ea.error("card "+eV),!1))}function ie(e){return!!ef.rr()&&(e instanceof s?ew.ea().ct(e).ss:(ea.error("card "+eV),!1))}function it(e,t){if(!ef.rr())return!1;if(!eR(e))return ea.error("cards must be an array"),!1;for(var i of e)if(!(i instanceof s))return ea.error(`Each card in cards ${eV}`),!1;return ew.ea().jt(e,t).ss}function ii(e,t,i,a,u,h,c,d,p,b,m,g,f,v,w,x,y,E){var S;if(t===s.Dt.ui||t===s.Dt.Ei)S=new o(e,i,a,u,h,c,d,p,b,m,g,f,v,w,x,y);else if(t===s.Dt.Bt)S=new n(e,i,a,u,h,c,d,p,b,m,g,f,v,w,x,y);else if(t===s.Dt.oi)S=new r(e,i,u,c,d,p,b,m,g,f,v,w,x,y);else{if(t!==s.Dt.Ti)return ea.error("Ignoring card with unknown type "+t),null;S=new l(e,i,d,b,v,w)}return E&&(S.test=E),S}function ia(e){if(null!=e){var t=e.querySelectorAll(".ab-unread-indicator")[0];null!=t&&(t.className+=" read")}}function is(e){ef.rr()&&ef.removeSubscription(e)}var ir={};function io(e){e&&(e.className=e.className.replace("ab-show","ab-hide"),setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e)},V.Ih));var t=e.getAttribute(e0);null!=t&&is(t);var i=e.getAttribute("data-listener-id");null!=i&&(window.removeEventListener("scroll",ir[i]),delete ir[i])}function il(e,t){var i=em.ea(),a=document.createElement("div");if(a.className="ab-feed-body",a.setAttribute("aria-label","Feed"),a.setAttribute("role","feed"),null==e.lastUpdated){var s=document.createElement("div");s.className="ab-no-cards-message";var r=document.createElement("i");r.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",s.appendChild(r),a.appendChild(s)}else{var n=!1,o=t=>e.logCardClick(t);for(var u of e.cards){var h=u instanceof l;!h||e.ur()?(a.appendChild(function(e,t,i,a="ltr"){var s=document.createElement("div");s.dir=a,s.className="ab-card ab-effect-card "+e.At,e.id&&(s.setAttribute("data-ab-card-id",e.id),s.setAttribute("id",e.id)),s.setAttribute("role","article"),s.setAttribute("tabindex","0");var r="",n=!1;e.url&&""!==e.url&&(r=e.url,n=!0);var o=a=>(ia(s),n&&(t(e),tj(r,i,a)),!1);if(e.pinned){var l=document.createElement("div");l.className="ab-pinned-indicator";var u=document.createElement("i");u.className="fa fa-star",l.appendChild(u),s.appendChild(l)}if(e.imageUrl&&""!==e.imageUrl){var h,c=document.createElement("div");c.dir=a,c.className="ab-image-area";var d=document.createElement("img");if(d.setAttribute("src",e.imageUrl),d.onload=()=>{s.style.height="auto"},h="",e.title||e.description||(h="Feed Image"),d.setAttribute("alt",h),c.appendChild(d),s.className+=" with-image",n&&!e.Tt){var p=document.createElement("a");p.setAttribute("href",r),p.onclick=o,p.appendChild(c),s.appendChild(p)}else s.appendChild(c)}var b=document.createElement("div");if(b.className="ab-card-body",b.dir=a,e.dismissible){e.logCardDismissal=()=>ie(e);var m=tz("Dismiss Card",void 0,e.dismissCard.bind(e),a);s.appendChild(m),tk(b,ty.kt,e=>{s.className+=" ab-swiped-left",m.onclick(e)}),tk(b,ty.Ht,e=>{s.className+=" ab-swiped-right",m.onclick(e)})}var g="",f=!1;if(e.title&&""!==e.title&&(g=e.title,f=!0),f){var v=document.createElement("h1");if(v.className="ab-title",v.id=er.Rt(),s.setAttribute("aria-labelledby",v.id),n){var w=document.createElement("a");w.setAttribute("href",r),w.onclick=o,w.appendChild(document.createTextNode(g)),v.appendChild(w)}else v.appendChild(document.createTextNode(g));b.appendChild(v)}var x=document.createElement("div");if(x.className=f?"ab-description":"ab-description ab-no-title",x.id=er.Rt(),s.setAttribute("aria-describedby",x.id),e.description&&x.appendChild(document.createTextNode(e.description)),n){var y=document.createElement("div");y.className="ab-url-area";var E=document.createElement("a");E.setAttribute("href",r),e.linkText&&E.appendChild(document.createTextNode(e.linkText)),E.onclick=o,y.appendChild(E),x.appendChild(y)}b.appendChild(x),s.appendChild(b);var S=document.createElement("div");return S.className="ab-unread-indicator",e.viewed&&(S.className+=" read"),s.appendChild(S),e.bt=s,s}(u,o,t,i.So())),n=n||!h):ea.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!n){var c=document.createElement("div");c.className="ab-no-cards-message",c.innerHTML=i.get("NO_CARDS_MESSAGE")||"",c.setAttribute("role","article"),a.appendChild(c)}}return a}function iu(e,t){if(null!=e&&null!=t){var i=[],a=t.querySelectorAll(".ab-card");e.Fo||(e.Fo={});for(var s=0;s<a.length;s++){var r,n,o,l,u,h,c=a[s].getAttribute("data-ab-card-id"),d=(r=a[s],ed.Mo(r,!0,!1,!1)),p=(n=a[s],ed.Mo(n,!1,!0,!1));if(e.Fo[c]){d||p||ia(a[s]);continue}var b=null!=(o=a[s])&&!!o.getAttribute("data-ab-had-top-impression"),m=null!=(l=a[s])&&!!l.getAttribute("data-ab-had-bottom-impression"),g=b,f=m;if(!b&&d&&(b=!0,null!=(u=a[s])&&u.setAttribute("data-ab-had-top-impression","true")),!m&&p&&(m=!0,null!=(h=a[s])&&h.setAttribute("data-ab-had-bottom-impression","true")),b&&m){if(g&&f)continue;for(var v of e.cards)if(v.id===c){e.Fo[v.id]=!0,i.push(v);break}}}i.length>0&&e.logCardImpressions(i)}}function ih(e,t){if(null!=e&&null!=t){t.setAttribute("aria-busy","true");var i=t.querySelectorAll(".ab-refresh-button")[0];null!=i&&(i.className+=" fa-spin");var a=new Date().valueOf().toString();t.setAttribute("data-last-requested-refresh",a),setTimeout(()=>{if(t.getAttribute("data-last-requested-refresh")===a){for(var e=t.querySelectorAll(".fa-spin"),i=0;i<e.length;i++)e[i].className=e[i].className.replace(/fa-spin/g,"");var s=t.querySelectorAll(".ab-initial-spinner")[0];if(null!=s){var r=document.createElement("span");r.innerHTML=em.ea().get("FEED_TIMEOUT_MESSAGE")||"",null!=s.parentNode&&(s.parentNode.appendChild(r),s.parentNode.removeChild(s))}"true"===t.getAttribute("aria-busy")&&t.setAttribute("aria-busy","false")}},V.No),e.dr()}}function ic(e,t,i,a,r){if(eR(t)){var n=[];for(var o of t)if(o instanceof s){if(o.url&&ta.test(o.url)&&e9(e7(o.url))){ea.error(e8(e4.Qr,"Content Card"));continue}n.push(o)}if(e.cards=n,e.lastUpdated=i,null!=a){if(a.setAttribute("aria-busy","false"),null==e.lastUpdated)io(a);else{var l=a.querySelectorAll(".ab-feed-body")[0];if(null!=l){var u=il(e,r);l.parentNode&&l.parentNode.replaceChild(u,l),iu(e,u.parentNode)}}}}}function id(e,t){if(ef.rr()){if(null==e||0===e.length||e!=e)return void ea.error("changeUser requires a non-empty userId.");if(e5(e)>c.mr)return void ea.error(`Rejected user id "${e}" because it is longer than ${c.mr} bytes.`);if(null==t||to(t,"set signature for new user","signature")){var i=ef.nn();i&&i.changeUser(e.toString(),ef.lr(),t)}}}function ip(){ea.info("Destroying Braze instance"),ef.destroy(!0)}function ib(e,t){return ef.initialize(e,t)}function im(e,t){if(!ef.rr())return!1;if(null==e||e.length<=0)return ea.error(`logCustomEvent requires a non-empty eventName, got "${e}". Ignoring event.`),!1;if(!ts(e,"log custom event","the event name"))return!1;var[i,a]=tl(t,"logCustomEvent","eventProperties",`log custom event "${e}"`,"event");if(!i)return!1;var s=ef.v();if(s&&s.ge(e))return ea.info(`Custom Event "${e}" is blocklisted, ignoring.`),!1;var r=ev.ds(eq.CustomEvent,{n:e,p:a});if(r.ss)for(var n of(ea.info(`Logged custom event "${e}".`),r.fe))t4.m().ue(tI.ve,[e,t],n);return r.ss}function ig(e,t,i,a,s){if(!ef.rr())return!1;if(null==i&&(i="USD"),null==a&&(a=1),null==e||e.length<=0)return ea.error(`logPurchase requires a non-empty productId, got "${e}", ignoring.`),!1;if(!ts(e,"log purchase","the purchase name"))return!1;if(null==t||isNaN(parseFloat(t.toString())))return ea.error(`logPurchase requires a numeric price, got ${t}, ignoring.`),!1;var r=parseFloat(t.toString()).toFixed(2);if(null==a||isNaN(parseInt(a.toString())))return ea.error(`logPurchase requires an integer quantity, got ${a}, ignoring.`),!1;var n=parseInt(a.toString());if(n<1||n>100)return ea.error(`logPurchase requires a quantity >1 and <100, got ${n}, ignoring.`),!1;if(-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(i=null!=i?i.toUpperCase():i))return ea.error(`logPurchase requires a valid currencyCode, got ${i}, ignoring.`),!1;var[o,l]=tl(s,"logPurchase","purchaseProperties",`log purchase "${e}"`,"purchase");if(!o)return!1;var u=ef.v();if(u&&u.Dr(e))return ea.info(`Purchase "${e}" is blocklisted, ignoring.`),!1;var h=ev.ds(eq.Pr,{pid:e,c:i,p:r,q:n,pr:l});if(h.ss)for(var c of(ea.info(`Logged ${n} purchase${n>1?"s":""} of "${e}" for ${i} ${r}.`),h.fe))t4.m().ue(tI.Rr,[e,s],c);return h.ss}function iv(){if(ef.rr()){var e=ef.nn();if(e){e.openSession();var t=i.Gs._s,a=new i(t,ea);a.jr(t.Os.hr,(i,s)=>{var r=s.lastClick,n=s.trackingString;ea.info(`Firing push click trigger from ${n} push click at ${r}`);var o=e.br(r,n),l=function(){t4.m().ue(tI.kr,[n],o)};e.vr(l,l),a.me(t.Os.hr,i)}),a.Hs(t.Os.$r,function(t){e.wr(t)})}}}function iw(e){if(ef.rr()){var t=ef.nn();t&&t.requestImmediateDataFlush(e)}}var ix={l:!1,provider:null,m:()=>(ix.p(),ix.provider||(ix.provider=new Q(ef.j(),ef.nn()),ef._(ix.provider)),ix.provider),p:()=>{ix.l||(ef.h(ix),ix.l=!0)},destroy:()=>{ix.provider=null,ix.l=!1}};function iy(){if(ef.rr())return eC.m().zi()}function iE(){var e;if(ef.rr())return null===(e=ef.g())||void 0===e?void 0:e.zr(ez.Fr).ss}function iS(e,t,i){if(ef.rr()){tD(void 0,"feed","body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button[dir=rtl]{left:0}.ab-feed .ab-card .ab-close-button[dir=ltr]{right:0}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-image-only .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=ltr]{padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=rtl]{padding-right:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area[dir=rtl]{padding:20px 25px 25px 0}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}"),tq();var a,s=(e,t)=>{if(null==t)return e;for(var i=[],a=0;a<t.length;a++)i.push(t[a].toLowerCase());for(var s=[],r=0;r<e.length;r++){for(var n=[],o=e[r].categories||[],l=0;l<o.length;l++)n.push(o[l].toLowerCase());(function(e,...t){null==e&&(e=[]);for(var i=[],a=arguments.length,s=0,r=e.length;s<r;s++){var n=e[s];if(-1===i.indexOf(n)){var o=1;for(o=1;o<a&&-1!==arguments[o].indexOf(n);o++);o===a&&i.push(n)}}return i})(n,i).length>0&&s.push(e[r])}return s},r=ef.sr(t8.tn)||ef.sr(t8.en)||!1,n=!1;null==e&&(e=document.body,n=!0);var o,l=!1;null==t?(ic(o=eC.m().Je(),s(o.cards,i),o.lastUpdated,null,r),l=!0):o=new Z(s(t,i),new Date);var u=function(e,t,i){var a=document.createElement("div");a.className="ab-feed ab-hide ab-effect-slide",a.setAttribute("role","dialog"),a.setAttribute("aria-label","Feed"),a.setAttribute("tabindex","-1");var s=document.createElement("div");s.className="ab-feed-buttons-wrapper",s.setAttribute("role","group"),a.appendChild(s);var r=document.createElement("i");r.className="fa fa-times ab-close-button",r.setAttribute("aria-label","Close Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button");var n=e=>{io(a),e.stopPropagation()};r.addEventListener("keydown",e=>{e.keyCode!==tN.To&&e.keyCode!==tN._o||n(e)}),r.onclick=n;var o=document.createElement("i");o.className="fa fa-refresh ab-refresh-button",e&&null==e.lastUpdated&&(o.className+=" fa-spin"),o.setAttribute("aria-label","Refresh Feed"),o.setAttribute("tabindex","0"),o.setAttribute("role","button");var l=t=>{ih(e,a),t.stopPropagation()};o.addEventListener("keydown",e=>{e.keyCode!==tN.To&&e.keyCode!==tN._o||l(e)}),o.onclick=l,s.appendChild(o),s.appendChild(r),a.appendChild(il(e,t));var u=()=>iu(e,a);if(a.addEventListener("scroll",u),!i){window.addEventListener("scroll",u);var h=er.Rt();ir[h]=u,a.setAttribute("data-listener-id",h)}return a}(o,r,n);if(l){(null==o.lastUpdated||new Date().valueOf()-o.lastUpdated.valueOf()>Z.ar)&&(ea.info(`Cached feed was older than max TTL of ${Z.ar} ms, requesting an update from the server.`),ih(o,u));var h,c=new Date().valueOf();(h=iC(function(e){var t=u.querySelectorAll(".ab-refresh-button")[0];if(null!=t){a=500-(new Date().valueOf()-c);var a,n=u.getAttribute("data-last-requested-refresh");if(n){var l=parseInt(n);isNaN(l)||(a-=new Date().valueOf()-l)}setTimeout(function(){t.className=t.className.replace(/fa-spin/g,"")},Math.max(a,0))}ic(o,s(e.cards,i),e.lastUpdated,u,r)}))&&u.setAttribute(e0,h)}var d=e=>{for(var t=e.querySelectorAll(".ab-feed"),i=null,a=0;a<t.length;a++)t[a].parentNode===e&&(i=t[a]);null!=i?(io(i),i.parentNode&&i.parentNode.replaceChild(u,i)):e.appendChild(u),setTimeout(function(){u.className=u.className.replace("ab-hide","ab-show")},0),n&&u.focus(),iE(),iu(o,u),o&&function(e,t){var i,a=t.querySelectorAll(".ab-image-area"),s=0;for(var r of(a.length>0&&(s=a[0].offsetWidth),e))if((i=r.bt)&&r.imageUrl&&"number"==typeof r.aspectRatio){var n=s/r.aspectRatio;n&&(i.style.height=`${n}px`)}}(o.cards,e)};null!=e?d(e):window.onload=(a=window.onload,function(){"function"==typeof a&&a(new Event("oldLoad")),d(document.body)})}}function iC(e){if(ef.rr())return eC.m().Fs(e)}var ik={l:!1,aa:null,ea:()=>(ik.p(),ik.aa||(ik.aa=new ee(ef.cr(),ef.Ma(),ef.te(),ef.Z(),ef.sr(t8._a),ef.sr(t8.Aa),ef.sr(t8.Ba),ef.v(),ef.sr(t8.Ca),ef.sr(t8.Da),ef.j())),ik.aa),p:()=>{ik.l||(ef.h(ik),ik.l=!0)},destroy:()=>{ik.aa=null,ik.l=!1}};function iA(e,t){if(ef.rr())return ik.ea().subscribe((t,i,a)=>{var s=ef.nn();s&&s.requestImmediateDataFlush(),"function"==typeof e&&e(t,i,a)},t)}function iN(e,t){if(ef.rr())return ik.ea().unsubscribe(e,t)}var i_={l:!1,provider:null,m:()=>(i_.p(),i_.provider||(i_.provider=new ei(ef.v(),ef.g(),ef.j(),ef.P()),ef._(i_.provider)),i_.provider),p:()=>{i_.l||(ef.h(i_),i_.l=!0)},destroy:()=>{i_.provider=null,i_.l=!1}};function iT(e,t,i=!1){if(ef.rr())return eT.m().refreshFeatureFlags(e,t,i)}function iO(e,t){iT(e,t)}return e({changeUser:id,destroy:ip,getUser:tG,initialize:ib,logCardClick:t9,logCardDismissal:ie,logCardImpressions:it,logCustomEvent:im,logFeedDisplayed:iE,logInAppMessageButtonClick:tQ,logInAppMessageClick:tP,logInAppMessageHtmlClick:tJ,logInAppMessageImpression:tB,logPurchase:ig,openSession:iv,refreshFeatureFlags:iO,removeSubscription:is,requestFeedRefresh:iy,requestImmediateDataFlush:iw,requestPushPermission:iA,showFeed:iS,showInAppMessage:t3,subscribeToFeedUpdates:iC,subscribeToInAppMessage:t5,unregisterPush:iN}),[()=>{ea=eI,es=eD,er=eM,(i=class{constructor(e,t){this.database=e,this.vd=t,this.parent="undefined"==typeof window?self:window,this.database=e,this.vd=t}Dd(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var e;try{if(null==this.Dd())return!1;var t=null===(e=this.Dd())||void 0===e?void 0:e.open("Braze IndexedDB Support Test");if(t&&(t.onupgradeneeded=()=>t.result.close(),t.onsuccess=()=>t.result.close()),"undefined"!=typeof window){var i=window,a=i.chrome||i.browser||i.pd;if(a&&a.runtime&&a.runtime.id)return this.vd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}catch(e){return this.vd.info("Not using IndexedDB for storage due to following error: "+e),!1}}Bd(e,t){var i,a=null===(i=this.Dd())||void 0===i?void 0:i.open(this.database.Sd,this.database.VERSION);if(null==a)return"function"==typeof t&&t(),!1;var s=this;return a.onupgradeneeded=e=>{s.vd.info("Upgrading indexedDB "+s.database.Sd+" to v"+s.database.VERSION+"...");var t,i=null===(t=e.target)||void 0===t?void 0:t.result;for(var a in s.database.Os)s.database.Os.hasOwnProperty(a)&&!i.objectStoreNames.contains(s.database.Os[a])&&i.createObjectStore(s.database.Os[a])},a.onsuccess=i=>{var a,r=null===(a=i.target)||void 0===a?void 0:a.result;r.onversionchange=()=>{r.close(),"function"==typeof t&&t(),s.vd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},e(r)},a.onerror=e=>{var i;return s.vd.info("Could not open indexedDB "+s.database.Sd+" v"+s.database.VERSION+": "+(null===(i=e.target)||void 0===i?void 0:i.errorCode)),"function"==typeof t&&t(),!0},!0}setItem(e,t,i,a,s){if(!this.isSupported())return"function"==typeof s&&s(),!1;var r=this;return this.Bd(n=>{if(!n.objectStoreNames.contains(e))return r.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+r.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof s&&s(),void n.close();var o=n.transaction([e],"readwrite");o.oncomplete=()=>n.close();var l=o.objectStore(e).put(i,t);l.onerror=()=>{r.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+r.database.Sd),"function"==typeof s&&s()},l.onsuccess=()=>{"function"==typeof a&&a()}},s)}getItem(e,t,i){if(!this.isSupported())return!1;var a=this;return this.Bd(s=>{if(!s.objectStoreNames.contains(e))return a.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+a.database.Sd+" - "+e+" is not a valid objectStore"),void s.close();var r=s.transaction([e],"readonly");r.oncomplete=()=>s.close();var n=r.objectStore(e).get(t);n.onerror=()=>{a.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+a.database.Sd)},n.onsuccess=e=>{var t,a=null===(t=e.target)||void 0===t?void 0:t.result;null!=a&&i(a)}})}jr(e,t,i){if(!this.isSupported())return"function"==typeof i&&i(),!1;var a=this;return this.Bd(s=>{if(!s.objectStoreNames.contains(e))return a.vd.error("Could not retrieve last record from "+e+" on indexedDB "+a.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof i&&i(),void s.close();var r=s.transaction([e],"readonly");r.oncomplete=()=>s.close();var n=r.objectStore(e).openCursor(null,"prev");n.onerror=()=>{a.vd.error("Could not open cursor for "+e+" on indexedDB "+a.database.Sd),"function"==typeof i&&i()},n.onsuccess=e=>{var a,s=null===(a=e.target)||void 0===a?void 0:a.result;null!=s&&null!=s.value&&null!=s.key?t(s.key,s.value):"function"==typeof i&&i()}},i)}me(e,t){if(!this.isSupported())return!1;var i=this;return this.Bd(a=>{if(!a.objectStoreNames.contains(e))return i.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),void a.close();var s=a.transaction([e],"readwrite");s.oncomplete=()=>a.close(),s.objectStore(e).delete(t).onerror=()=>{i.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+i.database.Sd)}})}Hs(e,t){if(!this.isSupported())return!1;var i=this;return this.Bd(a=>{if(!a.objectStoreNames.contains(e))return i.vd.error("Could not retrieve objects from "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),void a.close();var s=a.transaction([e],"readwrite");s.oncomplete=()=>a.close();var r=s.objectStore(e),n=r.openCursor(),o=[];n.onerror=()=>{o.length>0?(i.vd.info("Cursor closed midway through for "+e+" on indexedDB "+i.database.Sd),t(o)):i.vd.error("Could not open cursor for "+e+" on indexedDB "+i.database.Sd)},n.onsuccess=e=>{var i,a=null===(i=e.target)||void 0===i?void 0:i.result;null!=a?(null!=a.value&&null!=a.key&&(r.delete(a.key).onsuccess=()=>{o.push(a.value)}),"function"==typeof a.continue&&a.continue()):o.length>0&&t(o)}})}clearData(){if(!this.isSupported())return!1;var e=[];for(var t in this.database.Os)this.database.Os.hasOwnProperty(t)&&this.database.Os[t]!==this.database.Os.ie&&e.push(this.database.Os[t]);var i=this;return this.Bd(function(t){var a=t.transaction(e,"readwrite");a.oncomplete=()=>t.close();for(var s=0;s<e.length;s++){var r=e[s];a.objectStore(r).clear().onerror=function(){i.vd.error("Could not clear "+this.source.name+" on indexedDB "+i.database.Sd)}}a.onerror=function(){i.vd.error("Could not clear object stores on indexedDB "+i.database.Sd)}})}}).Gs={_s:{Sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,Os:{Xu:"data",hr:"pushClicks",cu:"pushSubscribed",Cd:"fallbackDevice",Ks:"cardUpdates",ie:"optOut",$r:"pendingData",yh:"sdkAuthenticationSignature"},oe:1}},a=class{constructor(){this.Ir={}}Ns(e){if("function"!=typeof e)return null;var t=er.Rt();return this.Ir[t]=e,t}removeSubscription(e){delete this.Ir[e]}removeAllSubscriptions(){this.Ir={}}ic(){return Object.keys(this.Ir).length}X(e){var t=[];for(var i in this.Ir){var a=this.Ir[i];t.push(a(e))}return t}},e("Card",s=class e{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m){this.id=e,this.viewed=t,this.title=i,this.imageUrl=a,this.description=s,this.created=r,this.updated=n,this.categories=o,this.expiresAt=l,this.url=u,this.linkText=h,this.aspectRatio=c,this.extras=d,this.pinned=p,this.dismissible=b,this.clicked=m,this.id=e,this.viewed=t||!1,this.title=i||"",this.imageUrl=a,this.description=s||"",this.created=r||null,this.updated=n||null,this.categories=o||[],this.expiresAt=l||null,this.url=u,this.linkText=h,null==c?this.aspectRatio=null:(c=parseFloat(c.toString()),this.aspectRatio=isNaN(c)?null:c),this.extras=d||{},this.pinned=p||!1,this.dismissible=b||!1,this.dismissed=!1,this.clicked=m||!1,this.isControl=!1,this.test=!1,this._t=null,this.Yt=null,this.Zt=null}subscribeToClickedEvent(e){return this.ti().Ns(e)}subscribeToDismissedEvent(e){return this.ii().Ns(e)}removeSubscription(e){this.ti().removeSubscription(e),this.ii().removeSubscription(e)}removeAllSubscriptions(){this.ti().removeAllSubscriptions(),this.ii().removeAllSubscriptions()}dismissCard(){if(this.dismissible&&!this.dismissed){"function"==typeof this.logCardDismissal&&this.logCardDismissal();var t=this.bt;!t&&this.id&&(t=document.getElementById(this.id)),t&&(t.style.height=t.offsetHeight+"px",t.className=t.className+" ab-hide",setTimeout(function(){t&&t.parentNode&&(t.style.height="0",t.style.margin="0",setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},e.si))},500))}}ti(){return null==this._t&&(this._t=new a),this._t}ii(){return null==this.Yt&&(this.Yt=new a),this.Yt}wt(){var t=new Date().valueOf();return!(null!=this.Zt&&t-this.Zt<e.hi)&&(this.Zt=t,this.viewed=!0,!0)}rt(){this.viewed=!0,this.clicked=!0,this.ti().X()}ft(){return!(!this.dismissible||this.dismissed)&&(this.dismissed=!0,this.ii().X(),!0)}ni(t){if(null==t||t[e.li.Et]!==this.id)return!0;if(t[e.li.ei])return!1;if(null!=t[e.li.Lt]&&null!=this.updated&&parseInt(t[e.li.Lt])<ej(this.updated.valueOf()))return!0;if(t[e.li.Ft]&&!this.viewed&&(this.viewed=!0),t[e.li.Wt]&&!this.clicked&&(this.clicked=t[e.li.Wt]),null!=t[e.li.Gt]&&(this.title=t[e.li.Gt]),null!=t[e.li.Jt]&&(this.imageUrl=t[e.li.Jt]),null!=t[e.li.Kt]&&(this.description=t[e.li.Kt]),null!=t[e.li.Lt]){var i,a=eX(t[e.li.Lt]);null!=a&&(this.updated=a)}if(null!=t[e.li.Ot]&&(i=t[e.li.Ot]===e.ri?null:eX(t[e.li.Ot]),this.expiresAt=i),null!=t[e.li.URL]&&(this.url=t[e.li.URL]),null!=t[e.li.Pt]&&(this.linkText=t[e.li.Pt]),null!=t[e.li.Qt]){var s=parseFloat(t[e.li.Qt].toString());this.aspectRatio=isNaN(s)?null:s}return null!=t[e.li.St]&&(this.extras=t[e.li.St]),null!=t[e.li.Ut]&&(this.pinned=t[e.li.Ut]),null!=t[e.li.Vt]&&(this.dismissible=t[e.li.Vt]),null!=t[e.li.Xt]&&(this.test=t[e.li.Xt]),!0}Bs(){ea.error("Must be implemented in a subclass")}}),s.ri=-1,s.li={Et:"id",Ft:"v",Vt:"db",ei:"r",Lt:"ca",Ut:"p",Ot:"ea",St:"e",zt:"tp",Jt:"i",Gt:"tt",Kt:"ds",URL:"u",Pt:"dm",Qt:"ar",Wt:"cl",Xt:"t"},s.Dt={Bt:"captioned_image",ui:"text_announcement",Ei:"short_news",oi:"banner_image",Ti:"control"},s.qt={Et:"id",Ft:"v",Vt:"db",Mt:"cr",Lt:"ca",Ut:"p",Nt:"t",Ot:"ea",St:"e",zt:"tp",Jt:"i",Gt:"tt",Kt:"ds",URL:"u",Pt:"dm",Qt:"ar",Wt:"cl",Xt:"s"},s.Ii={ai:"ADVERTISING",ci:"ANNOUNCEMENTS",Ni:"NEWS",mi:"SOCIAL"},s.si=400,s.hi=1e4,e("ImageOnly",r=class extends s{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p){super(e,t,null,i,null,a,s,r,n,o,l,u,h,c,d,p),this.At="ab-image-only",this.Tt=!1,this.test=!1}Bs(){var e={};return e[s.qt.zt]=s.Dt.oi,e[s.qt.Et]=this.id,e[s.qt.Ft]=this.viewed,e[s.qt.Jt]=this.imageUrl,e[s.qt.Lt]=this.updated,e[s.qt.Mt]=this.created,e[s.qt.Nt]=this.categories,e[s.qt.Ot]=this.expiresAt,e[s.qt.URL]=this.url,e[s.qt.Pt]=this.linkText,e[s.qt.Qt]=this.aspectRatio,e[s.qt.St]=this.extras,e[s.qt.Ut]=this.pinned,e[s.qt.Vt]=this.dismissible,e[s.qt.Wt]=this.clicked,e[s.qt.Xt]=this.test,e}}),e("CaptionedImage",n=class extends s{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m){super(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m),this.At="ab-captioned-image",this.Tt=!0,this.test=!1}Bs(){var e={};return e[s.qt.zt]=s.Dt.Bt,e[s.qt.Et]=this.id,e[s.qt.Ft]=this.viewed,e[s.qt.Gt]=this.title,e[s.qt.Jt]=this.imageUrl,e[s.qt.Kt]=this.description,e[s.qt.Lt]=this.updated,e[s.qt.Mt]=this.created,e[s.qt.Nt]=this.categories,e[s.qt.Ot]=this.expiresAt,e[s.qt.URL]=this.url,e[s.qt.Pt]=this.linkText,e[s.qt.Qt]=this.aspectRatio,e[s.qt.St]=this.extras,e[s.qt.Ut]=this.pinned,e[s.qt.Vt]=this.dismissible,e[s.qt.Wt]=this.clicked,e[s.qt.Xt]=this.test,e}}),e("ClassicCard",o=class extends s{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m){super(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m),this.At="ab-classic-card",this.Tt=!0}Bs(){var e={};return e[s.qt.zt]=s.Dt.Ei,e[s.qt.Et]=this.id,e[s.qt.Ft]=this.viewed,e[s.qt.Gt]=this.title,e[s.qt.Jt]=this.imageUrl,e[s.qt.Kt]=this.description,e[s.qt.Lt]=this.updated,e[s.qt.Mt]=this.created,e[s.qt.Nt]=this.categories,e[s.qt.Ot]=this.expiresAt,e[s.qt.URL]=this.url,e[s.qt.Pt]=this.linkText,e[s.qt.Qt]=this.aspectRatio,e[s.qt.St]=this.extras,e[s.qt.Ut]=this.pinned,e[s.qt.Vt]=this.dismissible,e[s.qt.Wt]=this.clicked,e[s.qt.Xt]=this.test,e}}),e("ControlCard",l=class extends s{constructor(e,t,i,a,s,r){super(e,t,null,null,null,null,i,null,a,null,null,null,s,r),this.isControl=!0,this.At="ab-control-card",this.Tt=!1}Bs(){var e={};return e[s.qt.zt]=s.Dt.Ti,e[s.qt.Et]=this.id,e[s.qt.Ft]=this.viewed,e[s.qt.Lt]=this.updated,e[s.qt.Ot]=this.expiresAt,e[s.qt.St]=this.extras,e[s.qt.Ut]=this.pinned,e[s.qt.Xt]=this.test,e}}),u=class e{constructor(e,t,i,a,s){this.userId=e,this.type=t,this.time=i,this.sessionId=a,this.data=s,this.userId=e,this.type=t,this.time=null==i||""===i?new Date().valueOf():i,this.sessionId=a,this.data=s}Zr(){var e,t={name:this.type,time:ej(this.time),data:this.data||{},session_id:this.sessionId};null!=this.userId&&(t.user_id=this.userId);var i=(null===(e=ef.Sr())||void 0===e?void 0:e.jh())||!1;if(!t.user_id&&!i){var a=e1(ef.j());a&&(t.alias=a)}return t}Bs(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new e(t.user_id,t.name,t.time,t.session_id,t.data)}static AE(e){return null!=e&&eF(e)&&null!=e.t&&""!==e.t}static Qn(t){return new e(t.u,t.t,t.ts,t.s,t.d)}},h=class e{constructor(e,t,i){this.eu=e,null==e&&(e=er.Rt()),!i||isNaN(i)?this.Nl=new Date().valueOf():this.Nl=i,this.eu=e,this.Al=new Date().valueOf(),this.ql=t}Bs(){return`g:${encodeURIComponent(this.eu)}|e:${this.ql}|c:${this.Nl}|l:${this.Al}`}static TE(e){if("string"!=typeof e)return null;var t,i=e.lastIndexOf("|e:"),a=e.substring(0,i),s=a.split("g:")[1];return t=/[|:]/.test(s)?encodeURIComponent(s):s,e=e.replace(a,`g:${t}`)}static Qn(t){var i;if("string"==typeof t)try{var a=t.split("|");if(!eR(a)||4!==a.length)return null;var s=e=>e.split(":")[1],r=e=>{var t=parseInt(s(e));if(!isNaN(t))return t};(i=new e(decodeURIComponent(s(a[0])),r(a[1]),r(a[2]))).Al=r(a[3])}catch(e){ea.info(`Unable to parse cookie string ${t}, failed with error: ${e3(e)}`)}else{if(null==t||null==t.g)return null;(i=new e(t.g,t.e,t.c)).Al=t.l}return i}},en=new RegExp(/^.+@.+\..+$/),e("User",c=class e{constructor(e,t){this.As=e,this.Ue=t,this.As=e,this.Ue=t}getUserId(e){var t=this.As.getUserId();if("function"!=typeof e)return t;ea.warn("The callback for getUserId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getUser().getUserId()`)"),e(t)}addAlias(e,t){return!to(e,"add alias","the alias",!1)||e.length<=0?(ea.error("addAlias requires a non-empty alias"),!1):!to(t,"add alias","the label",!1)||t.length<=0?(ea.error("addAlias requires a non-empty label"),!1):this.Ue.$n(e,t).ss}setFirstName(e){return!!to(e,"set first name","the firstName",!0)&&this.As.nu("first_name",e)}setLastName(e){return!!to(e,"set last name","the lastName",!0)&&this.As.nu("last_name",e)}setEmail(e){return null===e||"string"==typeof e&&null!=e.toLowerCase().match(en)?this.As.nu("email",e):(ea.error(`Cannot set email address - "${e}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!eU(e.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.As.nu("gender",t)}setDateOfBirth(e,t,i){return null===e&&null===t&&null===i?this.As.nu("dob",null):(e=null!=e?parseInt(e.toString()):null,t=null!=t?parseInt(t.toString()):null,i=null!=i?parseInt(i.toString()):null,null==e||null==t||null==i||isNaN(e)||isNaN(t)||isNaN(i)||t>12||t<1||i>31||i<1?(ea.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.As.nu("dob",`${e}-${t}-${i}`))}setCountry(e){return!!to(e,"set country","the country",!0)&&this.As.nu("country",e)}setHomeCity(e){return!!to(e,"set home city","the homeCity",!0)&&this.As.nu("home_city",e)}setLanguage(e){return!!to(e,"set language","the language",!0)&&this.As.nu("language",e)}setEmailNotificationSubscriptionType(t){return!!eU(e.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.As.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!eU(e.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.As.nu("push_subscribe",t)}setPhoneNumber(t){return!!to(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(e.Xn)?this.As.nu("phone",t):(ea.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(e,t,i,a,s){return null==e||null==t?(ea.error("Cannot set last-known location - latitude and longitude are required."),!1):(e=parseFloat(e.toString()),t=parseFloat(t.toString()),null!=i&&(i=parseFloat(i.toString())),null!=a&&(a=parseFloat(a.toString())),null!=s&&(s=parseFloat(s.toString())),isNaN(e)||isNaN(t)||null!=i&&isNaN(i)||null!=a&&isNaN(a)||null!=s&&isNaN(s)?(ea.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):e>90||e<-90||t>180||t<-180?(ea.error("Cannot set last-known location - latitude and longitude are bounded by \xb190 and \xb1180 respectively."),!1):null!=i&&i<0||null!=s&&s<0?(ea.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Ue.setLastKnownLocation(this.As.getUserId(),e,t,a,i,s).ss)}setCustomUserAttribute(e,t,i){if(!tr(e))return!1;var a=t=>{var[i]=tl(t,eQ,"attribute value",`set custom user attribute "${e}"`,"custom user attribute");return i};if(eR(t)){var[s,r]=function(e,t){var i=!1,a=!1,s=()=>{ea.error("Custom attribute arrays must be either string arrays or object arrays.")};for(var r of t)if("string"==typeof r){if(a)return s(),[!1,!1];if(!ts(r,`set custom user attribute "${e}"`,"the element in the given array"))return[!1,!1];i=!0}else{if(!eF(r)||i)return s(),[!1,!1];if(!tl(r,eQ,"attribute value",`set custom user attribute "${e}"`,"custom user attribute"))return[!1,!1];a=!0}return[i,a]}(e,t);if(!s&&!r&&0!==t.length)return!1;if(s||0===t.length)return this.Ue.Zn(eq.au,e,t).ss;for(var n of t)if(!a(n))return!1}else if(eF(t)){if(!a(t))return!1;if(i)return this.Ue.Zn(eq.du,e,t).ss}else if(!(void 0!==t&&tn(t))||(eL(t)&&(t=eH(t)),"string"==typeof t&&!ts(t,`set custom user attribute "${e}"`,"the element in the given array")))return!1;return this.As.setCustomUserAttribute(e,t)}addToCustomAttributeArray(e,t){return!!ts(e,"add to custom user attribute array","the given key")&&!(null!=t&&!ts(t,"add to custom user attribute array","the given value"))&&this.Ue.Zn(eq.pu,e,t).ss}removeFromCustomAttributeArray(e,t){return!!ts(e,"remove from custom user attribute array","the given key")&&!(null!=t&&!ts(t,"remove from custom user attribute array","the given value"))&&this.Ue.Zn(eq.bu,e,t).ss}incrementCustomUserAttribute(e,t){if(!ts(e,"increment custom user attribute","the given key"))return!1;null==t&&(t=1);var i=parseInt(t.toString());return isNaN(i)||i!==parseFloat(t.toString())?(ea.error(`Cannot increment custom user attribute because the given incrementValue "${t}" is not an integer.`),!1):this.Ue.Zn(eq.fu,e,i).ss}setCustomLocationAttribute(e,t,i){return!!ts(e,"set custom location attribute","the given key")&&((null!==t||null!==i)&&(t=null!=t?parseFloat(t.toString()):null,i=null!=i?parseFloat(i.toString()):null,null==t&&null!=i||null!=t&&null==i||null!=t&&(isNaN(t)||t>90||t<-90)||null!=i&&(isNaN(i)||i>180||i<-180))?(ea.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by \xb190 and \xb1180 respectively, or must both be null for removal."),!1):this.Ue.gu(e,t,i).ss)}addToSubscriptionGroup(t){return!to(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(ea.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Ue.yu(t,e.Nu.SUBSCRIBED).ss}removeFromSubscriptionGroup(t){return!to(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(ea.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Ue.yu(t,e.Nu.UNSUBSCRIBED).ss}En(e,t,i,a,s){this.As.En(e,t,i,a,s),this.Ue.vu()}Cn(e){this.As.Cn(e)}}),c.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},c.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},c.Xn=/^[0-9 .\\(\\)\\+\\-]+$/,c.Nu={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},c.Cu="user_id",c.lu="custom",c.mr=997,d=class{constructor(){}ef(){}ff(){}Ja(e){}static nf(e,t){if(e&&t){if(e=e.toLowerCase(),eR(t.cf)){for(var i=0;i<t.cf.length;i++)if(-1!==e.indexOf(t.cf[i].toLowerCase()))return t.identity}else if(-1!==e.indexOf(t.cf.toLowerCase()))return t.identity}}},p=class e extends d{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.browser=null,this.version=null,this.userAgentData){var e=this.Bc();this.browser=e.browser||"Unknown Browser",this.version=e.version||"Unknown Version"}this.OS=null}ef(){return this.browser}ff(){return this.version}Ja(t){if(this.OS)return Promise.resolve(this.OS);var i=i=>{for(var a=0;a<t.length;a++){var s=e.nf(i,t[a]);if(s)return this.OS=s,this.OS}return i};return this.userAgentData.platform?Promise.resolve(i(this.userAgentData.platform)):this.getHighEntropyValues().then(e=>e.platform?i(e.platform):navigator.platform).catch(()=>navigator.platform)}Bc(){var e={},t=this.userAgentData.brands;if(t&&t.length)for(var i of t){var a=this.Vc(th),s=i.brand.match(a);if(s&&s.length>0){e.browser=s[0],e.version=i.version;break}}return e}Vc(e){var t=[];for(var i in e)t.push(e[i]);return RegExp("("+t.join("|")+")","i")}getHighEntropyValues(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}},b=class e extends d{constructor(){super(),this.fd=e.Bc(navigator.userAgent||"")}ef(){return this.fd[0]||"Unknown Browser"}ff(){return this.fd[1]||"Unknown Version"}Ja(t){for(var i=0;i<t.length;i++){var a=t[i].string,s=e.nf(a,t[i]);if(s)return s===tc.Pg&&navigator.maxTouchPoints>1&&(s=tc.ao),Promise.resolve(s)}return Promise.resolve(navigator.platform)}static Bc(e){var t,i=e.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(-1!==e.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==e.indexOf("CrKey"))return["Chromecast",null];if(-1!==e.indexOf("BRAVIA")||-1!==e.indexOf("SonyCEBrowser")||-1!==e.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==e.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(e.match(/\b(Roku)\b/))return["Roku",null];if(e.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(i[1]===th.rO&&null!=(t=e.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/)))return(t=t.slice(1))[0]=t[0].replace("OPR",th.oO),t[0]=t[0].replace("EdgA",th.eO),"Edg"===t[0]&&(t[0]=th.eO),[t[0],t[1]];if(i[1]===th.Bg&&null!=(t=e.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/)))return(t=t.slice(1))[0]=t[0].replace("EdgiOS",th.eO),[t[0],t[1]];if((i=i[2]?[i[1],i[2]]:[null,null])[0]===th.Bg&&null!=(t=e.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,t[1]),null!=(t=e.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&i.splice(1,1,t[2]),i[0]===th.oO&&null!=(t=e.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",t[1]||""];if(i[0]){var a=i[0].toLowerCase();"crios"===a&&(i[0]=th.rO),"tizen"===a&&(i[0]="Samsung Smart TV",i[1]=null),"samsungbrowser"===a&&(i[0]="Samsung Browser")}return i}},(m=class e{constructor(){var t=navigator.userAgentData?p:b;this.Sg=new t,this.userAgent=navigator.userAgent,this.browser=this.Sg.ef(),this.version=this.Sg.ff(),this.OS=null,this.Ja().then(e=>this.OS=e);var i=navigator;this.language=(i.userLanguage||i.language||i.browserLanguage||i.systemLanguage||"").toLowerCase(),this.Pa=e.vg(this.userAgent)}dE(){return this.browser===th.Bg}Qa(){return this.OS||null}Ja(){return this.OS?Promise.resolve(this.OS):this.Sg.Ja(e.kg).then(e=>(this.OS=e,e))}static vg(e){e=e.toLowerCase();for(var t=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma","taiko"],i=0;i<t.length;i++)if(-1!==e.indexOf(t[i]))return!0;return!1}}).kg=[{string:navigator.platform,cf:"Win",identity:tc.Og},{string:navigator.platform,cf:"Mac",identity:tc.Pg},{string:navigator.platform,cf:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,cf:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,cf:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,cf:"Nintendo",identity:"Nintendo"},{string:navigator.platform,cf:"SunOS",identity:"SunOS"},{string:navigator.platform,cf:"PlayStation",identity:"PlayStation"},{string:navigator.platform,cf:"X11",identity:"X11"},{string:navigator.userAgent,cf:["iPhone","iPad","iPod"],identity:tc.ao},{string:navigator.platform,cf:"Pike v",identity:tc.ao},{string:navigator.userAgent,cf:["Web0S"],identity:"WebOS"},{string:navigator.platform,cf:["Linux armv7l","Android"],identity:tc.xg},{string:navigator.userAgent,cf:["Android"],identity:tc.xg},{string:navigator.platform,cf:"Linux",identity:"Linux"}],eo=new m,(g=class e{constructor(e,t){this._E=e,this.uE=t,this._E=e,this.uE=t}Ua(t){var i=e$(td.iu),a=new e.ne(t);for(var s of i)a.remove(td.iu[s])}uu(e,t){var i=null;null!=t&&t instanceof h&&(i=t.Bs()),this._E.store(e,i)}cE(e){var t=this.tu(e);null!=t&&(t.Al=new Date().valueOf(),this.uu(e,t))}tu(e){var t,i=this._E.gr(e),a=(e=>{var t;try{t=JSON.parse(e)}catch(e){t=null}return t})(i);if(a)(t=h.Qn(a)||null)&&this.uu(e,t);else{var s=h.TE(i);t=h.Qn(s)||null,s!==i&&t&&this.uu(e,t)}return t}Ml(e){this._E.remove(e)}Wa(){var e;for(var t of e$(td.iu))null!=(e=this.tu(td.iu[t]))&&this.uu(td.iu[t],e)}Eo(e){if(null==e||0===e.length)return!1;t=eR(e)?e:[e];var t,i=this.uE.gr(td.bs.tE);null!=i&&eR(i)||(i=[]);for(var a=0;a<t.length;a++)i.push(t[a].Bs());return this.uE.store(td.bs.tE,i)}Il(e){return null!=e&&this.Eo([e])}hE(){var e=this.uE.gr(td.bs.tE);this.uE.remove(td.bs.tE),null==e&&(e=[]);var t=[],i=!1,a=null;if(eR(e))for(var s=0;s<e.length;s++)u.AE(e[s])?t.push(u.Qn(e[s])):a=s;else i=!0;if(i||null!=a){var r="Stored events could not be deserialized as Events";i&&(r+=", was "+Object.prototype.toString.call(e)+" not an array"),null!=a&&(r+=", value at index "+a+" does not look like an event"),r+=", serialized values were of type "+typeof e+": "+JSON.stringify(e),t.push(new u(null,eq.Li,new Date().valueOf(),null,{e:r}))}return t}js(e,t){return!!eU(td.bs,e,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.uE.store(e,t)}ps(e){return!!eU(td.bs,e,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.uE.gr(e)}Ls(e){return!!eU(td.bs,e,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.uE.remove(e),!0)}clearData(){for(var e=e$(td.iu),t=e$(td.bs),i=0;i<e.length;i++){var a=e[i];this._E.remove(td.iu[a])}for(var s=0;s<t.length;s++){var r=t[s];this.uE.remove(td.bs[r])}}RE(e){return e||td.bs.sE}$u(e){var t=this.uE.gr(td.bs.eE);null==t&&(t={});var i=this.RE(e[c.Cu]),a=t[i];for(var s in e)s!==c.Cu&&(null==t[i]||a&&null==a[s])&&this.mu(e[c.Cu],s,e[s])}mu(e,t,i){var a=this.uE.gr(td.bs.eE);null==a&&(a={});var s=this.RE(e),r=a[s];if(null==r&&(r={},null!=e&&(r[c.Cu]=e)),t===c.lu)for(var n in null==r[t]&&(r[t]={}),i)r[t][n]=i[n];else r[t]=i;return a[s]=r,this.uE.store(td.bs.eE,a)}gE(){var e=this.uE.gr(td.bs.eE);this.uE.remove(td.bs.eE);var t=[];for(var i in e)null!=e[i]&&t.push(e[i]);return t}ru(e){var t=this.uE.gr(td.bs.eE);if(null!=t){var i=this.RE(null),a=t[i];null!=a&&(t[i]=void 0,this.uE.store(td.bs.eE,t),a[c.Cu]=e,this.$u(a))}var s=this.tu(td.iu.zl),r=null;null!=s&&(r=s.eu);var n=this.hE();if(null!=n)for(var o=0;o<n.length;o++){var l=n[o];null==l.userId&&l.sessionId==r&&(l.userId=e),this.Il(l)}}OE(){return this.uE.IE}}).rc=class{constructor(e){this.yn=e,this.yn=e,this.IE=eo.dE()?3:10}fE(e){return e+"."+this.yn}store(e,t){try{return localStorage.setItem(this.fE(e),JSON.stringify({v:t})),!0}catch(e){return ea.info("Storage failure: "+e3(e)),!1}}gr(e){try{var t=null,i=localStorage.getItem(this.fE(e));return null!=i&&(t=JSON.parse(i)),null==t?null:t.v}catch(e){return ea.info("Storage retrieval failure: "+e3(e)),null}}remove(e){try{localStorage.removeItem(this.fE(e))}catch(e){return ea.info("Storage removal failure: "+e3(e)),!1}}},g.ac=class{constructor(){this.bE={},this.KE=5242880,this.IE=3}store(e,t){var i=this.mE(t);return i>this.KE?(ea.info("Storage failure: object is ≈"+i+" bytes which is greater than the max of "+this.KE),!1):(this.bE[e]={value:t},!0)}mE(e){for(var t=[],i=[e],a=0;i.length;){var s=i.pop();if("boolean"==typeof s)a+=4;else if("string"==typeof s)a+=2*s.length;else if("number"==typeof s)a+=8;else if("object"==typeof s&&-1===t.indexOf(s)){var r=void 0,n=void 0;for(var o in t.push(s),s)n=s,r=o,i.push(n[r])}}return a}gr(e){var t=this.bE[e];return null==t?null:t.value}remove(e){this.bE[e]=null}},g.ne=class{constructor(e,t){this.yn=e,this.YE=t,this.yn=e,this.NE=this.GE(),this.DE=576e3,this.YE=!!t}fE(e){return null!=this.yn?e+"."+this.yn:e}GE(){for(var e=0,t=document.location.hostname,i=t.split("."),a="ab._gd";e<i.length-1&&-1===document.cookie.indexOf(a+"="+a);)e++,t="."+i.slice(-1-e).join("."),document.cookie=a+"="+a+";domain="+t+";";return document.cookie=a+"=;expires="+new Date(0).toUTCString()+";domain="+t+";",t}se(){var e=new Date;return e.setTime(e.getTime()+60*this.DE*1e3),e.getFullYear()}CE(){for(var e=eP(td.iu),t=document.cookie.split(";"),i=0;i<t.length;i++){for(var a=t[i];" "===a.charAt(0);)a=a.substring(1);for(var s=!1,r=0;r<e.length;r++)if(0===a.indexOf(e[r])){s=!0;break}if(s){var n=a.split("=")[0];-1===n.indexOf("."+this.yn)&&this.ME(n)}}}store(e,t){this.CE();var i,a=new Date;a.setTime(a.getTime()+60*this.DE*1e3);var s="expires="+a.toUTCString(),r="domain="+this.NE;i=this.YE?t:encodeURIComponent(t);var n=this.fE(e)+"="+i+";"+s+";"+r+";path=/";return n.length>=4093?(ea.info("Storage failure: string is "+n.length+" chars which is too large to store as a cookie."),!1):(document.cookie=n,!0)}gr(e){for(var t=[],i=this.fE(e)+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var r=a[s];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(i))try{var n=void 0;n=this.YE?r.substring(i.length,r.length):decodeURIComponent(r.substring(i.length,r.length)),t.push(n)}catch(t){return ea.info("Storage retrieval failure: "+e3(t)),this.remove(e),null}}return t.length>0?t[t.length-1]:null}remove(e){this.ME(this.fE(e))}ME(e){var t=e+"=;expires="+new Date(0).toUTCString();document.cookie=t,document.cookie=t+";path=/";var i=t+";domain="+this.NE;document.cookie=i,document.cookie=i+";path=/"}},g.tc=class{constructor(e,t,i){this.yn=e,this.pE=[],t&&this.pE.push(new g.ne(e)),i&&this.pE.push(new g.rc(e)),this.pE.push(new g.ac)}store(e,t){for(var i=!0,a=0;a<this.pE.length;a++)i=this.pE[a].store(e,t)&&i;return i}gr(e){for(var t=0;t<this.pE.length;t++){var i=this.pE[t].gr(e);if(null!=i)return i}return null}remove(e){new g.ne(this.yn).remove(e);for(var t=0;t<this.pE.length;t++)this.pE[t].remove(e)}},f=class{constructor(e,t,i){this.C=e,this.gh=t,this.Fh=i,this.C=e,this.gh=t||!1,this.Fh=i,this.kh=new a,this.fh=0,this.wh=1}jh(){return this.gh}xh(){return this.C.ps(td.bs.qh)}setSdkAuthenticationSignature(e){var t=this.xh();this.C.js(td.bs.qh,e);var a=i.Gs._s;new i(a,ea).setItem(a.Os.yh,this.wh,e),t!==e&&this.es()}Bh(){this.C.Ls(td.bs.qh);var e=i.Gs._s;new i(e,ea).me(e.Os.yh,this.wh)}subscribeToSdkAuthenticationFailures(e){return this.Fh.Ns(e)}Gh(e){this.Fh.X(e)}Hh(){this.kh.removeAllSubscriptions()}Jh(){this.fh+=1}Kh(){return this.fh}es(){this.fh=0}},v=class{constructor(){}U(e){}changeUser(e=!1){}clearData(e=!1){}},w=class{constructor(e){this.id=e,this.id=e}Zr(){var e={};return null!=this.browser&&(e.browser=this.browser),null!=this.Ga&&(e.browser_version=this.Ga),null!=this.os&&(e.os_version=this.os),null!=this.resolution&&(e.resolution=this.resolution),null!=this.language&&(e.locale=this.language),null!=this.timeZone&&(e.time_zone=this.timeZone),null!=this.userAgent&&(e.user_agent=this.userAgent),e}},x=class{constructor(e,t){this.C=e,this.Fa=t,this.C=e,null==t&&(t=eP(tp)),this.Fa=t}ce(e=!0){var t=this.C.tu(td.iu.Qo);null==t&&(t=new h(er.Rt()),e&&this.C.uu(td.iu.Qo,t));for(var i=new w(t.eu),a=0;a<this.Fa.length;a++)switch(this.Fa[a]){case tp.BROWSER:i.browser=eo.browser;break;case tp.BROWSER_VERSION:i.Ga=eo.version;break;case tp.OS:i.os=this.Ja();break;case tp.RESOLUTION:i.Ha=screen.width+"x"+screen.height;break;case tp.LANGUAGE:i.language=eo.language;break;case tp.TIME_ZONE:i.timeZone=this.Ka(new Date);break;case tp.USER_AGENT:i.userAgent=eo.userAgent}return i}Ja(){if(eo.Qa())return eo.Qa();var e=this.C.ps(td.bs.Xa);return e&&e.os_version?e.os_version:eo.Ja()}Ka(e){var t=!1;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){var i=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=i&&""!==i)return i}}catch(e){ea.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+e3(e)),t=!0}if(t)return"";var a=e.getTimezoneOffset();return this.Ya(a)}Ya(e){var t="GMT";return 0!==e&&(t+=(e<0?"+":"-")+("00"+Math.abs(Math.trunc(e/60))).slice(-2)+":"+("00"+Math.abs(Math.trunc(e%60))).slice(-2)),t}},el=tm,y=class{constructor(e,t,i,a,s,r,n,o,l,u,h,c){this.wn=e,this.C=t,this.Yh=i,this.As=a,this.T=s,this.B=r,this.yn=n,this.Xh=o,this.Vh=l,this.$h=u,this.appVersion=h,this.$a=c,this.Za=e=>null==e?"":`${e} `,this.wn=e,this.C=t,this.Yh=i,this.As=a,this.T=s,this.B=r,this.yn=n,this.Xh=o,this.Vh=l,this.$h=u,this.appVersion=h,this.$a=c,this.Ru=["npm"]}H(e,t=!1,i=!1){var a=this.wn.ce(!i),s=a.Zr();eG(this.C.ps(td.bs.Xa),s)||(e.device=s),e.api_key=this.yn,e.time=ej(new Date().valueOf(),!0);var r=this.C.ps(td.bs.qu)||[],n=this.C.ps(td.bs.Au)||"";if(this.Ru.length>0&&(!eG(r,this.Ru)||n!==this.T.Ss())&&(e.sdk_metadata=this.Ru),e.sdk_version=this.Vh,this.$h&&(e.sdk_flavor=this.$h),e.app_version=this.appVersion,e.app_version_code=this.$a,e.device_id=a.id,t){var o=this.As.getUserId();null!=o&&(e.user_id=o)}if(!e.user_id&&!this.Yh.jh()){var l=e1(this.C);l&&(e.alias=l)}return e}ts(e,t,i){var a=t.auth_error,s=t.error;if(!a&&!s)return!0;if(a){this.Yh.Jh();var r,n={errorCode:a.error_code};for(var o of i)eR(o)&&"X-Braze-Auth-Signature"===o[0]&&(n.signature=o[1]);e.respond_with&&e.respond_with.user_id?n.userId=e.respond_with.user_id:e.user_id&&(n.userId=e.user_id);var l=a.reason;return l?(n.reason=l,r=`due to ${l}`):r=`with error code ${a.error_code}.`,this.Yh.jh()||(r+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),ea.error(`SDK Authentication failed ${r}`),this.Du(e.events||[],e.attributes||[]),this.Yh.Gh(n),!1}if(s){var u,h=s;switch(h){case tb.Tu:return u="Received successful response with empty body.",ev.ds(eq.Li,{e:u}),ea.info(u),!1;case tb.ku:return u="Received successful response with invalid JSON",ev.ds(eq.Li,{e:u+": "+t.response}),ea.info(u),!1;case tb.Su:h=`The API key "${e.api_key}" is invalid for the baseUrl ${this.Xh}`;break;case tb.Bu:h="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case tb.wu:h="No device identifier. Please contact support@braze.com"}ea.error("Backend error: "+h)}return!1}zu(e,t,i,a){return!!(e&&0!==e.length||t&&0!==t.length||i||a)}ju(e,t,i,a,s=!1){var r,n=[],o=e=>e||"",l=o(this.As.getUserId()),u=this.Yr(e,t),h=[],c=[],d=null;if(i.length>0){var p=[];for(var b of i){if(r=b.Zr(),this.Yh.jh()){if(l&&!r.user_id){d||(d={}),d.events||(d.events=[]),d.events.push(r);continue}if(o(r.user_id)!==l){c.push(r);continue}}p.push(r)}p.length>0&&(u.events=p)}if(a.length>0){var m=[];for(var g of a)g&&(this.Yh.jh()&&o(g.user_id)!==l?h.push(g):m.push(g));m.length>0&&(u.attributes=m)}if(this.Du(c,h),u=this.H(u,!0,s),d){var f={requestData:d=this.H(d,!1,s),headers:this.J(d,el.O.Xu)};n.push(f)}if(u&&!this.zu(u.events,u.attributes,e,t))return d?n:null;var v={requestData:u,headers:this.J(u,el.O.Xu)};return n.push(v),n}Du(e,t){if(e){var i=[];for(var a of e){var s=u.fromJson(a);s.time=1e3*s.time,i.push(s)}this.C.Eo(i)}if(t)for(var r of t)this.C.$u(r)}rs(e,t){var i="HTTP error ";null!=e&&(i+=e+" "),i+=t,ea.error(i)}zr(e){return ev.ds(eq.Mu,{n:e})}Yr(e,t,i){var a={};e&&(a.feed=!0),t&&(a.triggers=!0);var s=null!=i?i:this.As.getUserId();if(s&&(a.user_id=s),!a.user_id&&!this.Yh.jh()){var r=e1(this.C);r&&(a.alias=r)}return a.config={config_time:this.B.Es()},{respond_with:a}}Lu(e){var t=new Date().valueOf(),i="7200000",a=el.Eu(this.C,e);return -1!==a&&(i=(t-a).toString()),i}J(e,t,i=!1){var a=[["X-Braze-Api-Key",this.yn]],s=this.Lu(t);a.push(["X-Braze-Last-Req-Ms-Ago",s]);var r=el.Fu(this.C,t).toString();a.push(["X-Braze-Req-Attempt",r]);var n=!1;if(null!=e.respond_with&&e.respond_with.triggers&&(a.push(["X-Braze-TriggersRequest","true"]),n=!0),null!=e.respond_with&&e.respond_with.feed&&(a.push(["X-Braze-FeedRequest","true"]),n=!0),t===el.O.Pi){a.push(["X-Braze-ContentCardsRequest","true"]);var o=this.C.ps(td.bs.Fi);o&&i||(o=0,this.C.js(td.bs.Fi,o)),a.push(["BRAZE-SYNC-RETRY-COUNT",o.toString()]),n=!0}if(t===el.O.De&&(a.push(["X-Braze-FeatureFlagsRequest","true"]),n=!0),n&&a.push(["X-Braze-DataRequest","true"]),this.Yh.jh()){var l=this.Yh.xh();null!=l&&a.push(["X-Braze-Auth-Signature",l])}return a}Ku(e,t,i,a){window.setTimeout(()=>{ea.info(`Retrying rate limited ${this.Za(a)}SDK request.`),this.V(t,i,a)},e)}V(e,t,i,a){if(!this.Iu(i))return ea.info(`${this.Za(i)}SDK request being rate limited.`),void("function"==typeof a&&a());var s=this.Pu();if(!s.Uu)return ea.info(`${this.Za(i)}SDK request being rate limited. Request will be retried in ${Math.trunc(s.Ou/1e3)} seconds.`),void this.Ku(s.Ou,e,t,i);this.C.js(td.bs.xu,new Date().valueOf());var r=e.device;r&&r.os_version instanceof Promise?r.os_version.then(i=>{e.device.os_version=i,t(s.Gu)}):t(s.Gu)}Hu(e){var t;null===(t=this.C)||void 0===t||t.js(td.bs._u,e)}Wu(e,t){var i=this.Yu();null==i&&(i={}),i[e]=t,this.C.js(td.bs.Ju,i)}Qu(){var e;return null===(e=this.C)||void 0===e?void 0:e.ps(td.bs._u)}Yu(){var e;return null===(e=this.C)||void 0===e?void 0:e.ps(td.bs.Ju)}Vu(e,t,i,a,s=""){if(s){var r,n=this.Yu();r=null==n||isNaN(n[s])?t:n[s]}else(null==(r=this.Qu())||isNaN(r))&&(r=t);return Math.min(r+(e-a)/1e3/i,t)}Zu(e,t){return Math.max(0,(1-e)*t*1e3)}tl(e,t=""){var i={Uu:!0,Gu:-1,Ou:0};if(null==e&&(e=!0),!e&&!t)return i;var a,s,r,n,o,l,u,h=null;if(e)h=null===(a=this.C)||void 0===a?void 0:a.ps(td.bs.xu);else{var c=el.el(this.C);if(null==c||null==c[t])return i;h=c[t]}if(null==h||isNaN(h)||(e?(l=(null===(s=this.B)||void 0===s?void 0:s.il())||-1,u=(null===(r=this.B)||void 0===r?void 0:r.sl())||-1):(l=(null===(n=this.B)||void 0===n?void 0:n.rl(t))||-1,u=(null===(o=this.B)||void 0===o?void 0:o.ol(t))||-1),-1===l||-1===u))return i;var d=new Date().valueOf(),p=this.Vu(d,l,u,h,t);return p<1?(i.Uu=!1,i.Ou=this.Zu(p,u)):(p=Math.trunc(p)-1,i.Gu=p,e?this.Hu(p):this.Wu(t,p)),i}Pu(){return this.tl(!0)}Iu(e){var t=this.tl(!1,e);return!(t&&!t.Uu)}es(){this.Yh.es()}Z(){return this.Xh}addSdkMetadata(e){for(var t of e)-1===this.Ru.indexOf(t)&&this.Ru.push(t)}},eu=tg,E=class{constructor(e=!1,t=[]){this.ss=e,this.fe=t,this.ss=e,this.fe=t}It(e){this.ss=this.ss&&e.ss,this.fe.push(...e.fe)}},eh=tv,S=class{constructor(e,t,i,s,r,n,o,l,u,h){this.yn=e,this.baseUrl=t,this.T=i,this.wn=s,this.As=r,this.B=n,this.C=o,this.$l=l,this.Yh=u,this.S=h,this.yn=e,this.baseUrl=t,this.Pl=0,this.IE=o.OE()||0,this.Ol=null,this.T=i,this.wn=s,this.As=r,this.B=n,this.C=o,this.Yh=u,this.S=h,this.$l=l,this.Ul=new a,this._l=null,this.Xl=50,this.Ql=!1}Yl(e,t){return!e&&!t&&this.Yh.Kh()>=this.Xl}Zl(e){var t=this.T.Hl();if(e.length>0){var i=this.As.getUserId();for(var a of e){var s=!a.userId&&!i||a.userId===i;a.type===eq.Jl&&s&&(t=!0)}}return t}sc(e=!1,t=!1,i=!0,a,s,r,n=!1,o=!1){var l=this;i&&this.hc();var u=this.C.hE(),h=this.C.gE(),c=!1,d=(e,t,n=-1)=>{var o=!1,l=new Date().valueOf();el.W(this.C,el.O.Xu,l),-1!==n&&t.push(["X-Braze-Req-Tokens-Remaining",n.toString()]),eu.Y({url:this.baseUrl+"/data/",data:e,headers:t,ss:i=>{null!=e.respond_with&&e.respond_with.triggers&&(this.Pl=Math.max(this.Pl-1,0)),this.S.ts(e,i,t)?(this.Yh.es(),this.B.Rl(i),null!=e.respond_with&&e.respond_with.user_id!=this.As.getUserId()||(null!=e.device&&this.C.js(td.bs.Xa,e.device),null!=e.sdk_metadata&&(this.C.js(td.bs.qu,e.sdk_metadata),this.C.js(td.bs.Au,this.T.Ss())),this.$l(i),el.ns(this.C,el.O.Xu,1),"function"==typeof a&&a())):i.auth_error&&(o=!0)},error:()=>{null!=e.respond_with&&e.respond_with.triggers&&(this.Pl=Math.max(this.Pl-1,0)),this.S.Du(e.events,e.attributes),"function"==typeof s&&s()},os:e=>{if("function"==typeof r&&r(e),i&&!c){if(e&&!o)this.nc();else{el.hs(this.C,el.O.Xu);var t=this.Ol;(null==t||t<1e3*this.IE)&&(t=1e3*this.IE),this.nc(Math.min(3e5,tf(1e3*this.IE,3*t)))}c=!0}}})},p=this.Zl(u),b=t||p;if(this.Yl(n,p))return void ea.info("Declining to flush data due to 50 consecutive authentication failures");if(i&&!this.S.zu(u,h,e,b))return this.nc(),void("function"==typeof r&&r(!0));var m=this.S.ju(e,b,u,h,o);b&&this.Pl++;var g=!1;if(m){var f=function(e){l.S.V(e.requestData,t=>d(e.requestData,e.headers,t),el.O.Xu,s),g=!0};for(var v of m)f(v)}this.Yh.jh()&&i&&!g?this.nc():p&&(ea.info("Invoking new session subscriptions"),this.Ul.X())}uc(){return this.Pl>0}nc(e=1e3*this.IE){this.Ql||(this.hc(),this._l=window.setTimeout(()=>{if(document.hidden){var e="visibilitychange",t=()=>{document.hidden||(document.removeEventListener(e,t,!1),this.sc())};document.addEventListener(e,t,!1)}else this.sc()},e),this.Ol=e)}hc(){null!=this._l&&(clearTimeout(this._l),this._l=null)}initialize(){this.Ql=!1,this.nc()}destroy(){this.Ul.removeAllSubscriptions(),this.Yh.Hh(),this.hc(),this.Ql=!0,this.sc(void 0,void 0,!1,void 0,void 0,void 0,void 0,!0),this._l=null}rn(e){return this.Ul.Ns(e)}openSession(){var e=this.T.Ss()!==this.T.qo();e&&(this.C.cE(td.iu.Qo),this.C.cE(td.iu.su)),this.sc(void 0,!1,void 0,()=>{this.C.Ls(td.bs.we)}),this.vu(),e&&Promise.resolve().then(function(){return eA}).then(e=>{if(!this.Ql){var t=e.default.ea();if(null!=t&&(eh.isPushPermissionGranted()||eh.isPushBlocked())){var a=()=>{t.Tn()?ea.info("Push token maintenance is disabled, not refreshing token for backend."):t.subscribe()},s=i.Gs._s;new i(s,ea).jr(s.Os.cu,(e,t)=>{t&&a()},()=>{var e=this.C.ps(td.bs.Kn);(null==e||e)&&a()})}}})}lc(){this.C.Ls(td.bs.Yi),this.C.Ls(td.bs.wi),this.C.Ls(td.bs.cn)}changeUser(e,t,i){var a=this.As.getUserId();if(a!==e){this.T.Kl(),this.lc(),null!=a&&this.sc(void 0,!1,void 0,void 0,void 0),this.As.ou(e),i?this.Yh.setSdkAuthenticationSignature(i):this.Yh.Bh();for(var s=0;s<t.length;s++)t[s].changeUser(null==a);null!=a&&this.C.Ls(td.bs.Ct),this.C.Ls(td.bs.Xa),this.C.Ls(td.bs.SE),this.openSession(),ea.info('Changed user to "'+e+'".')}else{var r="Doing nothing.";i&&this.Yh.xh()!==i&&(this.Yh.setSdkAuthenticationSignature(i),r="Updated SDK authentication signature"),ea.info(`Current user is already ${e}. ${r}`)}}requestImmediateDataFlush(e){this.hc(),this.T.qo(),this.sc(void 0,void 0,void 0,void 0,()=>{ea.error("Failed to flush data, request will be retried automatically.")},e,!0)}requestFeedRefresh(){this.T.qo(),this.sc(!0)}vr(e,t){this.T.qo(),ea.info("Requesting explicit trigger refresh."),this.sc(void 0,!0,void 0,e,t)}$n(e,t){var i=eq.cc,a={a:e,l:t},s=ev.ds(i,a);return s&&(ea.info(`Logged alias ${e} with label ${t}`),this.C.js(td.bs.SE,a)),s}Zn(e,t,i){if(this.B.hu(t))return ea.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new E;var a=ev.ds(e,{key:t,value:i});if(a){var s="object"==typeof i?JSON.stringify(i,null,2):i;ea.info(`Logged custom attribute: ${t} with value: ${s}`)}return a}setLastKnownLocation(e,t,i,a,s,r){var n={latitude:t,longitude:i};null!=a&&(n.altitude=a),null!=s&&(n.ll_accuracy=s),null!=r&&(n.alt_accuracy=r);var o=ev.ds(eq.dc,n,e||void 0);return o&&ea.info(`Set user last known location as ${JSON.stringify(n,null,2)}`),o}br(e,t){var i=this.T.qo();return new u(this.As.getUserId(),eq.mc,e,i,{cid:t})}fc(e,t){return new i(e,t)}vu(){var e=i.Gs._s;this.fc(e,ea).setItem(e.Os.Xu,1,{baseUrl:this.baseUrl,data:{api_key:this.yn,device_id:this.wn.ce().id},userId:this.As.getUserId(),sdkAuthEnabled:this.Yh.jh()})}wr(e){for(var t of e)if(t.api_key===this.yn)this.S.Du(t.events,t.attributes);else{var a=i.Gs._s;new i(a,ea).setItem(a.Os.$r,er.Rt(),t)}}gu(e,t,i){var a,s;return this.B.hu(e)?(ea.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new E):(null===t&&null===i?(a=eq.gc,s={key:e}):(a=eq.vc,s={key:e,latitude:t,longitude:i}),ev.ds(a,s))}yu(e,t){return ev.ds(eq.bc,{group_id:e,status:t})}},C=class e{constructor(e=0,t=[],i=[],a=[],s=null,r=null,n={enabled:!1},o={enabled:!1,refresh_rate_limit:void 0},l={enabled:!0,capacity:30,refill_rate:30,endpoint_overrides:{}},u={enabled:!1,max_placements:0}){this.dl=e,this.wl=t,this.yl=i,this.Ll=a,this.Fl=s,this.El=r,this.vl=n,this.Gi=o,this.Cl=l,this.banners=u,this.dl=e,this.wl=t,this.yl=i,this.Ll=a,this.Fl=s,this.El=r,this.vl=n,this.Gi=o,this.Cl=l,this.banners=u}Bs(){return{s:"5.6.0",l:this.dl,e:this.wl,a:this.yl,p:this.Ll,m:this.Fl,v:this.El,c:this.vl,f:this.Gi,grl:this.Cl,b:this.banners}}static Qn(t){var i=t.l;return"5.6.0"!==t.s&&(i=0),new e(i,t.e,t.a,t.p,t.m,t.v,t.c,t.f,t.grl,t.b)}},k=class{constructor(e){this.C=e,this.C=e,this.al=new a,this.hl=new a,this.ul=new a,this.cl=new a,this.ml=null,this.gl=null}bl(){if(null==this.gl){var e=this.C.ps(td.bs.fl);this.gl=null!=e?C.Qn(e):new C}return this.gl}Es(){return this.bl().dl}Rl(e){if(null!=e&&null!=e.config){var t=e.config;if(t.time>this.bl().dl){let e;var i=new C(t.time,t.events_blacklist,t.attributes_blacklist,t.purchases_blacklist,t.messaging_session_timeout,t.vapid_public_key,t.content_cards,t.feature_flags,null==(e=t.global_request_rate_limit)?this.bl().Cl:e,t.banners),a=!1;null!=i.El&&this.Gn()!==i.El&&(a=!0);var s=!1;null!=i.vl.enabled&&this.Xi()!==i.vl.enabled&&(s=!0);var r=!1;null!=i.Gi.enabled&&this.Qi()!==i.Gi.enabled&&(r=!0);var n=!1;null!=i.banners.enabled&&this.Us()!==i.banners.enabled&&(n=!0),this.gl=i,this.C.js(td.bs.fl,i.Bs()),a&&this.al.X(),s&&this.hl.X(),r&&this.ul.X(),n&&this.cl.X()}}}Hn(e){var t=this.al.Ns(e);return this.ml&&this.al.removeSubscription(this.ml),this.ml=t,t}$i(e){return this.hl.Ns(e)}Re(e){return this.ul.Ns(e)}A(e){return this.cl.Ns(e)}ge(e){return -1!==this.bl().wl.indexOf(e)}hu(e){return -1!==this.bl().yl.indexOf(e)}Dr(e){return -1!==this.bl().Ll.indexOf(e)}Bl(){return this.bl().Fl}Gn(){return this.bl().El}Xi(){return this.bl().vl.enabled||!1}Tl(){var e=this.bl().Cl;return!(!e||null==e.enabled)&&e.enabled}il(){if(!this.Tl())return -1;var e=this.bl().Cl;return null==e.capacity||e.capacity<10?-1:e.capacity}sl(){if(!this.Tl())return -1;var e=this.bl().Cl;return null==e.refill_rate||e.refill_rate<=0?-1:e.refill_rate}jl(e){var t=this.bl().Cl.endpoint_overrides;return null==t?null:t[e]}rl(e){var t=this.jl(e);return null==t||isNaN(t.capacity)||t.capacity<=0?-1:t.capacity}ol(e){var t=this.jl(e);return null==t||isNaN(t.refill_rate)||t.refill_rate<=0?-1:t.refill_rate}Qi(){return this.bl().Gi.enabled&&null==this.Se()?(ev.ds(eq.Li,{e:"Missing feature flag refresh_rate_limit."}),!1):this.bl().Gi.enabled||!1}Se(){return this.bl().Gi.refresh_rate_limit}Us(){return this.bl().banners.enabled||!1}ee(){return this.bl().banners.max_placements||0}},A=class{constructor(e,t,i,a){this.C=e,this.As=t,this.B=i,this.Sl=a,this.C=e,this.As=t,this.B=i,this.xl=1e3,(null==a||isNaN(a))&&(a=1800),a<this.xl/1e3&&(ea.info("Specified session timeout of "+a+"s is too small, using the minimum session timeout of "+this.xl/1e3+"s instead."),a=this.xl/1e3),this.Sl=a}Dl(e,t){return new u(this.As.getUserId(),eq.Gl,e,t.eu,{d:ej(e-t.Nl)})}Ss(){var e=this.C.tu(td.iu.zl);return null==e?null:e.eu}Hl(){var e=new Date().valueOf(),t=this.B.Bl();if(null==t)return!1;var i=this.C.ps(td.bs.Wl),a=null==i||e-i>1e3*t;return a&&this.C.js(td.bs.Wl,e),a}kl(e,t){return null==t||null==t.ql||!(e-t.Nl<this.xl)&&t.ql<e}qo(){var e=new Date().valueOf(),t=e+1e3*this.Sl,i=this.C.tu(td.iu.zl);if(this.kl(e,i)){var a="Generating session start event with time "+e;if(null!=i){var s=i.Al;s-i.Nl<this.xl&&(s=i.Nl+this.xl),this.C.Il(this.Dl(s,i)),a+=" (old session ended "+s+")"}a+=". Will expire "+t.valueOf(),ea.info(a);var r=new h(er.Rt(),t);return this.C.Il(new u(this.As.getUserId(),eq.Jl,e,r.eu)),this.C.uu(td.iu.zl,r),null==this.C.ps(td.bs.Wl)&&this.C.js(td.bs.Wl,e),r.eu}if(null!=i)return i.Al=e,i.ql=t,this.C.uu(td.iu.zl,i),i.eu}Kl(){var e=this.C.tu(td.iu.zl);null!=e&&(this.C.Ml(td.iu.zl),this.C.Il(this.Dl(new Date().valueOf(),e)))}},ec=tw,e("ControlMessage",N=class e{constructor(e,t){this.triggerId=e,this.messageExtras=t,this.triggerId=e,this.messageExtras=t,this.extras={},this.isControl=!0,this.st=!1}static fromJson(t){return new e(t.trigger_id,t.message_extras)}wt(){return!this.st&&(this.st=!0,!0)}ko(){return this.st}}),ed={Ic:null,Mo:tx},e("InAppMessage",_=class e{constructor(t,i,s,r,n,o,l,u,h,c,d,p,b,m,g,f,v,w,x,y,E,S,C,k,A,N,_,T,O,I){this.message=t,this.messageAlignment=i,this.slideFrom=s,this.extras=r,this.triggerId=n,this.clickAction=o,this.uri=l,this.openTarget=u,this.dismissType=h,this.duration=c,this.icon=d,this.imageUrl=p,this.imageStyle=b,this.iconColor=m,this.iconBackgroundColor=g,this.backgroundColor=f,this.textColor=v,this.closeButtonColor=w,this.animateIn=x,this.animateOut=y,this.header=E,this.headerAlignment=S,this.headerTextColor=C,this.frameColor=k,this.buttons=A,this.cropType=N,this.orientation=_,this.htmlId=T,this.css=O,this.messageExtras=I,this.message=t,this.messageAlignment=i||e.TextAlignment.CENTER,this.duration=c||5e3,this.slideFrom=s||e.SlideFrom.BOTTOM,this.extras=r||{},this.triggerId=n,this.clickAction=o||e.ClickAction.NONE,this.uri=l,this.openTarget=u||e.OpenTarget.NONE,this.dismissType=h||e.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=p,this.imageStyle=b||e.ImageStyle.TOP,this.iconColor=m||e.th.ih,this.iconBackgroundColor=g||e.th.sh,this.backgroundColor=f||e.th.ih,this.textColor=v||e.th.hh,this.closeButtonColor=w||e.th.eh,this.animateIn=x,null==this.animateIn&&(this.animateIn=!0),this.animateOut=y,null==this.animateOut&&(this.animateOut=!0),this.header=E,this.headerAlignment=S||e.TextAlignment.CENTER,this.headerTextColor=C||e.th.hh,this.frameColor=k||e.th.Eh,this.buttons=A||[],this.cropType=N||e.CropType.FIT_CENTER,this.orientation=_,this.htmlId=T,this.css=O,this.isControl=!1,this.messageExtras=I,this.nh=!1,this.st=!1,this.Co=!1,this.Th=!1,this.We=null,this.Xe=null,this._t=new a,this.oh=new a,this.do=e.TextAlignment.CENTER}subscribeToClickedEvent(e){return this._t.Ns(e)}subscribeToDismissedEvent(e){return this.oh.Ns(e)}removeSubscription(e){this._t.removeSubscription(e),this.oh.removeSubscription(e)}removeAllSubscriptions(){this._t.removeAllSubscriptions(),this.oh.removeAllSubscriptions()}closeMessage(){this.ll(this.We)}Ye(){return!0}Bo(){return this.Ye()}Ve(){return null!=this.htmlId&&this.htmlId.length>4}Oe(){return this.Ve()&&null!=this.css&&this.css.length>0}_e(){if(this.Ve()&&this.Oe())return this.htmlId+"-css"}wt(){return!this.st&&(this.st=!0,!0)}ko(){return this.st}rt(e){return!this.Co&&(this.Co=!0,this._t.X(),!0)}ft(){return!this.Th&&(this.Th=!0,this.oh.X(),!0)}hide(t){if(t&&t.parentNode){var i=t.closest(".ab-iam-root");if(null==i&&(i=t),this.Ye()&&null!=i.parentNode){var a=i.parentNode.classList;a&&a.contains(e.rh)&&a.remove(e.rh),document.body.removeEventListener("touchmove",e.lh)}i.className=i.className.replace(e.uh,e.ah)}return this.animateOut||!1}ll(t,i){if(null!=t){this.We=null;var a,s,r=!1;(a=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t)&&(r=this.hide(a));var n=document.body;null!=n&&(s=n.scrollTop);var o=()=>{if(t&&t.parentNode){var e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}var a=this._e();if(null!=a){var r=document.getElementById(a);r&&r.parentNode&&r.parentNode.removeChild(r)}null!=n&&"Safari"===eo.browser&&(n.scrollTop=s),i?i():this.ft()};r?setTimeout(o,e.Ih):o(),this.Xe&&this.Xe.focus()}}po(){return document.createTextNode(this.message||"")}uo(e){var t="";this.message||this.header||!this.Ye()||(t="Modal Image"),e.setAttribute("alt",t)}static lh(t){if(!t.targetTouches||!(t.targetTouches.length>1)){var i=t.target;i&&i.classList&&i.classList.contains("ab-message-text")&&i.scrollHeight>i.clientHeight||document.querySelector(`.${e.rh}`)&&t.cancelable&&t.preventDefault()}}Ah(t){var i=t.parentNode;this.Ye()&&null!=i&&this.orientation!==e.Orientation.LANDSCAPE&&(null!=i.classList&&i.classList.add(e.rh),document.body.addEventListener("touchmove",e.lh,!!tE()&&{passive:!1})),t.className+=" "+e.uh}static Oh(e){if(e.keyCode===tN._h&&!ef.sr(t8.mh)&&document.querySelectorAll(".ab-modal-interactions").length>0){var t=document.getElementsByClassName("ab-html-message"),i=!1;for(var a of t){var s=null;t_(a)&&a.contentWindow&&(s=a.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=s&&(tC(s),i=!0)}if(!i){var r=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=r&&tC(r)}}}Lh(){this.nh||ef.sr(t8.mh)||(document.addEventListener("keydown",e.Oh,!1),ef.Nh(()=>{document.removeEventListener("keydown",e.Oh)}),this.nh=!0)}Bs(t){var i={};return t&&(i[e.qt.ra]=this.message,i[e.qt.sa]=this.messageAlignment,i[e.qt.Sh]=this.slideFrom,i[e.qt.St]=this.extras,i[e.qt.ta]=this.triggerId,i[e.qt.ia]=this.clickAction,i[e.qt.URI]=this.uri,i[e.qt.oa]=this.openTarget,i[e.qt.pa]=this.dismissType,i[e.qt.ma]=this.duration,i[e.qt.na]=this.icon,i[e.qt.Jt]=this.imageUrl,i[e.qt.ua]=this.imageStyle,i[e.qt.ca]=this.iconColor,i[e.qt.fa]=this.iconBackgroundColor,i[e.qt.da]=this.backgroundColor,i[e.qt.la]=this.textColor,i[e.qt.ga]=this.closeButtonColor,i[e.qt.ja]=this.animateIn,i[e.qt.xa]=this.animateOut,i[e.qt.za]=this.header,i[e.qt.ha]=this.headerAlignment,i[e.qt.va]=this.headerTextColor,i[e.qt.wa]=this.frameColor,i[e.qt.ya]=this.buttons,i[e.qt.Sa]=this.cropType,i[e.qt.ba]=this.orientation,i[e.qt.ka]=this.htmlId,i[e.qt.CSS]=this.css,i[e.qt.zt]=t,i[e.qt.qa]=this.messageExtras),i}}),_.th={hh:4281545523,ih:4294967295,sh:4278219733,Rh:4293914607,Mh:4283782485,Eh:3224580915,eh:4288387995},_.lo={Dh:"hd",Ze:"ias",Ch:"of",dh:"do",Uh:"umt",bh:"tf",Ph:"te"},_.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},_.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},_.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},_.OpenTarget={NONE:"NONE",BLANK:"BLANK"},_.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},_.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},_.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},_.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},_.Qe={jn:"SLIDEUP",dn:"MODAL",xo:"MODAL_STYLED",gn:"FULL",fn:"WEB_HTML",Le:"HTML",Io:"HTML_FULL"},_.Ih=500,_.ph=200,_.uh="ab-show",_.ah="ab-hide",_.rh="ab-pause-scrolling",_.qt={ra:"m",sa:"ma",Sh:"sf",St:"e",ta:"ti",ia:"ca",URI:"u",oa:"oa",pa:"dt",ma:"d",na:"i",Jt:"iu",ua:"is",ca:"ic",fa:"ibc",da:"bc",la:"tc",ga:"cbc",ja:"ai",xa:"ao",za:"h",ha:"ha",va:"htc",wa:"fc",ya:"b",Sa:"ct",ba:"o",ka:"hi",CSS:"css",zt:"type",Po:"messageFields",qa:"me"},e("HtmlMessage",T=class e extends _{constructor(e,t,i,a,s,r,n,o,l,u,h,c){super(e,void 0,void 0,t,i,void 0,void 0,void 0,a=a||_.DismissType.MANUAL,s,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,r,n,void 0,void 0,void 0,o,void 0,void 0,void 0,l,u,c),this.messageFields=h,this.messageFields=h}Bo(){return!1}rt(e){if(this.Ke===_.Qe.fn){if(this.Co)return!1;this.Co=!0}return this._t.X(e),!0}Bs(){var t=super.Bs(e.Dt);return t[_.qt.Po]=this.messageFields,t}static hn(t){return new e(t[_.qt.ra],t[_.qt.St],t[_.qt.ta],t[_.qt.pa],t[_.qt.ma],t[_.qt.ja],t[_.qt.xa],t[_.qt.wa],t[_.qt.ka],t[_.qt.CSS],t[_.qt.Po],t[_.qt.qa])}}),T.Dt=_.Qe.fn,e("InAppMessageButton",O=class e{constructor(t,i,s,r,n,o,l){this.text=t,this.backgroundColor=i,this.textColor=s,this.borderColor=r,this.clickAction=n,this.uri=o,this.id=l,this.text=t||"",this.backgroundColor=i||_.th.sh,this.textColor=s||_.th.ih,this.borderColor=r||this.backgroundColor,this.clickAction=n||_.ClickAction.NONE,this.uri=o,null==l&&(l=e.Jr),this.id=l,this.Co=!1,this._t=new a}subscribeToClickedEvent(e){return this._t.Ns(e)}removeSubscription(e){this._t.removeSubscription(e)}removeAllSubscriptions(){this._t.removeAllSubscriptions()}rt(){return!this.Co&&(this.Co=!0,this._t.X(),!0)}static fromJson(t){return new e(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}),O.Jr=-1,e("FullScreenMessage",I=class e extends _{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m,g,f,v,w,x,y,E,S,C,k,A,N,T){super(e,t,void 0,i,a,s,r,n,o=o||_.DismissType.MANUAL,l,u,h,c,d,p,b,m,g,f,v,w,x,y,E,S,C=C||_.CropType.CENTER_CROP,k=k||_.Orientation.PORTRAIT,A,N,T),this.do=_.TextAlignment.CENTER}Bs(){return super.Bs(e.Dt)}static hn(t){return new e(t[_.qt.ra],t[_.qt.sa],t[_.qt.St],t[_.qt.ta],t[_.qt.ia],t[_.qt.URI],t[_.qt.oa],t[_.qt.pa],t[_.qt.ma],t[_.qt.na],t[_.qt.Jt],t[_.qt.ua],t[_.qt.ca],t[_.qt.fa],t[_.qt.da],t[_.qt.la],t[_.qt.ga],t[_.qt.ja],t[_.qt.xa],t[_.qt.za],t[_.qt.ha],t[_.qt.va],t[_.qt.wa],tO(t[_.qt.ya]),t[_.qt.Sa],t[_.qt.ba],t[_.qt.ka],t[_.qt.CSS],t[_.qt.qa])}}),I.Dt=_.Qe.gn,e("ModalMessage",D=class e extends _{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m,g,f,v,w,x,y,E,S,C,k,A,N){super(e,t,void 0,i,a,s,r,n,o=o||_.DismissType.MANUAL,l,u,h,c,d,p,b,m,g,f,v,w,x,y,E,S,C=C||_.CropType.FIT_CENTER,void 0,k,A,N),this.do=_.TextAlignment.CENTER}Bs(){return super.Bs(e.Dt)}static hn(t){return new e(t[_.qt.ra],t[_.qt.sa],t[_.qt.St],t[_.qt.ta],t[_.qt.ia],t[_.qt.URI],t[_.qt.oa],t[_.qt.pa],t[_.qt.ma],t[_.qt.na],t[_.qt.Jt],t[_.qt.ua],t[_.qt.ca],t[_.qt.fa],t[_.qt.da],t[_.qt.la],t[_.qt.ga],t[_.qt.ja],t[_.qt.xa],t[_.qt.za],t[_.qt.ha],t[_.qt.va],t[_.qt.wa],tO(t[_.qt.ya]),t[_.qt.Sa],t[_.qt.ka],t[_.qt.CSS],t[_.qt.qa])}}),D.Dt=_.Qe.dn,e("SlideUpMessage",q=class e extends _{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,m,g,f,v,w,x,y){super(e,t=t||_.TextAlignment.START,i,a,s,r,n,o,l,u,h,c,void 0,d,p,b=b||_.th.Rh,m=m||_.th.Mh,g,f,v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,w,x,y),this.do=_.TextAlignment.START}Ye(){return!1}po(){var e=document.createElement("span");return e.appendChild(document.createTextNode(this.message||"")),e}Ah(e){var t=e.getElementsByClassName("ab-in-app-message")[0];ed.Mo(t,!0,!0)||(this.slideFrom===_.SlideFrom.TOP?t.style.top="0px":t.style.bottom="0px"),super.Ah(e)}Bs(){return super.Bs(e.Dt)}static hn(t){return new e(t[_.qt.ra],t[_.qt.sa],t[_.qt.Sh],t[_.qt.St],t[_.qt.ta],t[_.qt.ia],t[_.qt.URI],t[_.qt.oa],t[_.qt.pa],t[_.qt.ma],t[_.qt.na],t[_.qt.Jt],t[_.qt.ca],t[_.qt.fa],t[_.qt.da],t[_.qt.la],t[_.qt.ga],t[_.qt.ja],t[_.qt.xa],t[_.qt.ka],t[_.qt.CSS],t[_.qt.qa])}}),q.Dt=_.Qe.jn,z=class e{constructor(e){this.wc=e,this.wc=e}xc(e){return null==this.wc||this.wc===e[0]}static fromJson(t){return new e(t?t.event_name:null)}Bs(){return this.wc}},(M=class e{constructor(t,i,a,s){this.yE=t,this.HE=i,this.comparator=a,this.LE=s,this.yE=t,this.HE=i,this.comparator=a,this.LE=s,this.HE===e.QE.UE&&this.comparator!==e.wE.XE&&this.comparator!==e.wE.BE&&this.comparator!==e.wE.jE&&this.comparator!==e.wE.zE&&(this.LE=eX(this.LE))}xc(t){var i=null;switch(null!=t&&(i=t[this.yE]),this.comparator){case e.wE.FE:return null!=i&&i.valueOf()===this.LE.valueOf();case e.wE.kE:return null==i||i.valueOf()!==this.LE.valueOf();case e.wE.vE:return null!=i&&typeof i==typeof this.LE&&i>this.LE;case e.wE.XE:return this.HE===e.QE.UE?null!=i&&eL(i)&&eY(i)<=this.LE.valueOf():null!=i&&typeof i==typeof this.LE&&i>=this.LE;case e.wE.xE:return null!=i&&typeof i==typeof this.LE&&i<this.LE;case e.wE.BE:return this.HE===e.QE.UE?null!=i&&eL(i)&&eY(i)>=this.LE.valueOf():null!=i&&typeof i==typeof this.LE&&i<=this.LE;case e.wE.JE:return null!=i&&"string"==typeof i&&typeof i==typeof this.LE&&null!=i.match(this.LE);case e.wE.VE:return null!=i;case e.wE.qE:return null==i;case e.wE.jE:return null!=i&&eL(i)&&eW(i)<this.LE;case e.wE.zE:return null!=i&&eL(i)&&eW(i)>this.LE;case e.wE.PE:return null==i||typeof i!=typeof this.LE||"string"!=typeof i||null==i.match(this.LE)}return!1}static fromJson(t){return new e(t.property_key,t.property_type,t.comparator,t.property_value)}Bs(){var e=this.LE;return eL(this.LE)&&(e=ej(e.valueOf())),{k:this.yE,t:this.HE,c:this.comparator,v:e}}static Qn(t){return new e(t.k,t.t,t.c,t.v)}}).QE={WE:"boolean",ZE:"number",$E:"string",UE:"date"},M.wE={FE:1,kE:2,vE:3,XE:4,xE:5,BE:6,JE:10,VE:11,qE:12,jE:15,zE:16,PE:17},B=class e{constructor(e){this.filters=e,this.filters=e}xc(e){for(var t=!0,i=0;i<this.filters.length;i++){for(var a=this.filters[i],s=!1,r=0;r<a.length;r++)if(a[r].xc(e)){s=!0;break}if(!s){t=!1;break}}return t}static fromJson(t){if(null==t||!eR(t))return null;for(var i=[],a=0;a<t.length;a++){for(var s=[],r=t[a],n=0;n<r.length;n++)s.push(M.fromJson(r[n]));i.push(s)}return new e(i)}Bs(){for(var e=[],t=0;t<this.filters.length;t++){for(var i=this.filters[t],a=[],s=0;s<i.length;s++)a.push(i[s].Bs());e.push(a)}return e}static Qn(t){for(var i=[],a=0;a<t.length;a++){for(var s=[],r=t[a],n=0;n<r.length;n++)s.push(M.Qn(r[n]));i.push(s)}return new e(i)}},P=class e{constructor(e,t){this.wc=e,this.tf=t,this.wc=e,this.tf=t}xc(e){if(null==this.wc||null==this.tf)return!1;var t=e[0],i=e[1];return t===this.wc&&this.tf.xc(i)}static fromJson(t){return new e(t?t.event_name:null,t?B.fromJson(t.property_filters):null)}Bs(){return{e:this.wc,pf:this.tf?this.tf.Bs():null}}},U=class e{constructor(e,t){this.if=e,this.rf=t,this.if=e,this.rf=t}xc(e){if(null==this.if)return!1;var t=$.sf(e[0],this.if);if(!t)return!1;var i=null==this.rf||0===this.rf.length;if(null!=this.rf){for(var a=0;a<this.rf.length;a++)if(this.rf[a]===e[1]){i=!0;break}}return t&&i}static fromJson(t){return new e(t?t.id:null,t?t.buttons:null)}Bs(){return this.if}},R=class e{constructor(e){this.productId=e,this.productId=e}xc(e){return null==this.productId||e[0]===this.productId}static fromJson(t){return new e(t?t.product_id:null)}Bs(){return this.productId}},L=class e{constructor(e,t){this.productId=e,this.tf=t,this.productId=e,this.tf=t}xc(e){if(null==this.productId||null==this.tf)return!1;var t=e[0],i=e[1];return t===this.productId&&this.tf.xc(i)}static fromJson(t){return new e(t?t.product_id:null,t?B.fromJson(t.property_filters):null)}Bs(){return{id:this.productId,pf:this.tf?this.tf.Bs():null}}},F=class e{constructor(e){this.if=e,this.if=e}xc(e){return null==this.if||$.sf(e[0],this.if)}static fromJson(t){return new e(t?t.campaign_id:null)}Bs(){return this.if}},($=class e{constructor(e,t){this.type=e,this.data=t,this.type=e,this.data=t}kc(t,i){return e._c[this.type]===t&&(null==this.data||this.data.xc(i))}static sf(e,t){var i=null;try{i=window.atob(e)}catch(t){return ea.info("Failed to unencode analytics id "+e+": "+e3(t)),!1}return t===i.split("_")[0]}static fromJson(t){var i=t.type,a=null;switch(i){case e.ln.OPEN:case e.ln.Xt:break;case e.ln.Rr:a=R.fromJson(t.data);break;case e.ln.Ec:a=L.fromJson(t.data);break;case e.ln.kr:a=F.fromJson(t.data);break;case e.ln.ve:a=z.fromJson(t.data);break;case e.ln.jc:a=P.fromJson(t.data);break;case e.ln.Ao:a=U.fromJson(t.data)}return new e(i,a)}Bs(){return{t:this.type,d:this.data?this.data.Bs():null}}static Qn(t){var i,a=null;switch(t.t){case e.ln.OPEN:case e.ln.Xt:break;case e.ln.Rr:a=new R(t.d);break;case e.ln.Ec:a=new L((i=t.d||{}).id,B.Qn(i.pf||[]));break;case e.ln.kr:a=new F(t.d);break;case e.ln.ve:a=new z(t.d);break;case e.ln.jc:a=new P((i=t.d||{}).e,B.Qn(i.pf||[]));break;case e.ln.Ao:a=new U(t.d)}return new e(t.t,a)}}).ln={OPEN:"open",Rr:"purchase",Ec:"purchase_property",kr:"push_click",ve:"custom_event",jc:"custom_event_property",Ao:"iam_click",Xt:"test"},$._c={},$._c[$.ln.OPEN]=tI.OPEN,$._c[$.ln.Rr]=tI.Rr,$._c[$.ln.Ec]=tI.Rr,$._c[$.ln.kr]=tI.kr,$._c[$.ln.ve]=tI.ve,$._c[$.ln.jc]=tI.ve,$._c[$.ln.Ao]=tI.Ao,$._c[$.ln.Xt]=tI.Xt,(G=class e{constructor(t,i=[],a,s,r=0,n,o,l=0,u=e.td,h,c,d){this.id=t,this.sd=i,this.startTime=a,this.endTime=s,this.priority=r,this.type=n,this.data=o,this.ed=l,this.rd=u,this.mn=h,this.hd=c,this.od=d,this.id=t,this.sd=i||[],void 0===a&&(a=null),this.startTime=a,void 0===s&&(s=null),this.endTime=s,this.priority=r||0,this.type=n,this.ed=l||0,null==h&&(h=1e3*(this.ed+30)),this.mn=h,this.data=o,null!=u&&(this.rd=u),this.hd=c,this.od=d||null}nd(t){return null==this.od||this.rd!==e.td&&t-this.od>=1e3*this.rd}ad(e){this.od=e}ud(e){return Math.max(e+1e3*this.ed-new Date().valueOf(),0)}dd(e){var t=new Date().valueOf()-e,i=null==e||isNaN(t)||null==this.mn||t<this.mn;return i||ea.info(`Trigger action ${this.type} is no longer eligible for display - fired ${t}ms ago and has a timeout of ${this.mn}ms.`),!i}static fromJson(t){for(var i=t.id,a=[],s=0;s<t.trigger_condition.length;s++)a.push($.fromJson(t.trigger_condition[s]));var r=eX(t.start_time),n=eX(t.end_time),o=t.priority,l=t.type,u=t.delay,h=t.re_eligibility,c=t.timeout,d=t.data,p=t.min_seconds_since_last_trigger;return eU(e.ln,l,"Could not construct Trigger from server data","Trigger.Types")?new e(i,a,r,n,o,l,d,u,h,c,p):null}Bs(){for(var e=[],t=0;t<this.sd.length;t++)e.push(this.sd[t].Bs());return{i:this.id,c:e,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.ed,r:this.rd,tm:this.mn,ss:this.hd,ld:this.od}}static Qn(t){for(var i=[],a=t.c||[],s=0;s<a.length;s++)i.push($.Qn(a[s]));return new e(t.i,i,eJ(t.s),eJ(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}}).ln={an:"inapp",md:"templated_iam"},G.td=-1,ep={openUri:tF,Uo:tR,$o:tL,Ra:t$},eb=tZ,j=class{constructor(e,t=!1){if(this.language=e,null!=e&&(e=e.toLowerCase()),null!=e&&null==t0[e]){var i=e.indexOf("-");i>0&&(e=e.substring(0,i))}if(null==t0[e]){var a="Braze does not yet have a localization for language "+e+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.";t?ea.error(a):ea.info(a),e="en"}this.language=e}get(e){return t0[this.language][e]}So(){switch(this.language){case"ar":case"he":case"fa":return"rtl";default:return"ltr"}}},em=t1,X=class{constructor(e,t,i,s){this.S=e,this.T=t,this.C=i,this.As=s,this.S=e,this.T=t,this.C=i,this.As=s,this.Ir=new a,ef.N(this.Ir),this.Mr=1e3,this.Tr=6e4,this.Br=null}_r(){return this.Ir}qr(e){return this.Ir.Ns(e)}Er(){return this.Br}Gr(e){this.Br=e}ds(e,t,i,a){var s,r=new E;if(t===eq.Nr||e instanceof N){if(!e.wt())return ea.info("This in-app message has already received an impression. Ignoring analytics event."),r}else if((t===eq.Cr||e instanceof T&&t===eq.Or)&&!e.rt(a))return ea.info("This in-app message has already received a click. Ignoring analytics event."),r;return null==(s=e instanceof N?{trigger_ids:[e.triggerId]}:this.Xr(e))?r:(e.messageExtras&&(s.message_extras=e.messageExtras),null!=i&&(s.bid=i),ev.ds(t,s))}Hr(e,t){var i=new E;if(!e.rt())return ea.info("This in-app message button has already received a click. Ignoring analytics event."),i;var a=this.Xr(t);return null==a?i:e.id===O.Jr?(ea.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),i):(null!=e.id&&(a.bid=e.id),ev.ds(eq.Or,a))}Kr(e){var t=e.messageFields;return null!=t&&t.is_push_primer||!1}Lr(e){if(e instanceof _){var t,i=e=>{if(e){var t=e7(e);return e9(t)?e8(e4.Qr,"In-App Message"):function e(t){if(!t||!tu(t))return!1;var i=e2.properties.type,a=e2.properties.eo,s=t[i];return s===e2.types.io?e6(e,t[a]):s===e2.types.requestPushPermission}(t)&&!eh.Ur()?e8(e4.Vr,"In-App Message"):void 0}};if(this.Kr(e)&&!eh.Ur())return"In-App Message contains a push prompt, but is not eligible for a push prompt. Ignoring.";for(var a of e.buttons||[])if(a.clickAction===_.ClickAction.URI&&a.uri&&ta.test(a.uri)&&(t=i(a.uri)))return t;return e.clickAction===_.ClickAction.URI&&e.uri&&ta.test(e.uri)?i(e.uri):void 0}}Wr(e,t,i,a){var s=this.S;if(s){var r=s.Yr(!1,!1),n=s.H(r);n.template={trigger_id:e.triggerId,trigger_event_type:t},null!=i&&(n.template.data=i.Zr());var o=s.J(n,el.O.sn);s.V(n,(s=-1)=>{if(this.S){var r=new Date().valueOf();el.W(this.C,el.O.sn,r),-1!==s&&o.push(["X-Braze-Req-Tokens-Remaining",s.toString()]),eu.Y({url:`${this.S.Z()}/template/`,data:n,headers:o,ss:t=>{if(el.ns(this.C,el.O.sn,1),!this.S.ts(n,t,o))return void("function"==typeof e.on&&e.on());if(this.S.es(),null!=t&&null!=t.templated_message){var i=t.templated_message;if(i.type===G.ln.an){var a=tT(i.data);if(null!=a){var s=this.Lr(a);if(s)return ea.error(s),void("function"==typeof e.on&&e.on());"function"==typeof e.un&&e.un(a)}}}},error:s=>{var r=`getting user personalization for message ${e.triggerId}`;if(new Date().valueOf()-e.pn<e.mn){el.hs(this.C,el.O.sn);var n=Math.min(e.mn,this.Tr),o=this.Mr;null==a&&(a=o);var l=Math.min(n,tf(o,3*a));r+=`. Retrying in ${l} ms`,setTimeout(()=>{this.Wr(e,t,i,l)},l)}this.S.rs(s,r)}})}},el.O.sn)}}Xr(e){if(null==e.triggerId)return ea.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;var t={};return null!=e.triggerId&&(t.trigger_ids=[e.triggerId]),t}Me(e){return!!this.C&&!(!(e&&e instanceof _&&e.constructor!==_)||e instanceof N)&&this.C.js(td.bs.cn,e.Bs())}Ar(){if(!this.C)return null;var e,t=this.C.ps(td.bs.cn);if(!t)return null;switch(t.type){case _.Qe.gn:e=I.hn(t);break;case _.Qe.fn:case _.Qe.Le:case _.Qe.Io:e=T.hn(t);break;case _.Qe.dn:case _.Qe.xo:e=D.hn(t);break;case _.Qe.jn:e=q.hn(t)}return e&&this.vn(),e}vn(){this.C&&this.C.Ls(td.bs.cn)}},eg=t2,H=class e{constructor(e,t,i,a,s){this.triggerId=e,this.un=t,this.on=i,this.pn=a,this.mn=s,this.triggerId=e,this.un=t,this.on=i,this.pn=a,this.mn=s}static fromJson(t,i,a,s,r){return null==t||null==t.trigger_id?null:new e(t.trigger_id,i,a,s,r)}},J=class extends v{constructor(e,t,i,a,s){super(),this.tg=e,this.Ms=t,this.C=i,this.Ue=a,this.ig=s,this.tg=e,this.Ms=t,this.C=i,this.Ue=a,this.ig=s,this.sg=[],this.eg=[],this.hg=null,this.ng={},this.og={},this.triggers=[],this.lg=0,this.ag(),this.gg()}fg(){if(this.C){this.hg=this.C.ps(td.bs.aE)||this.hg,this.ng=this.C.ps(td.bs.iE)||this.ng,this.og=this.C.ps(td.bs.nE)||this.og;for(var e=0;e<this.triggers.length;e++){var t=this.triggers[e];t.id&&null!=this.og[t.id]&&t.ad(this.og[t.id])}}}ag(){if(this.C){this.lg=this.C.ps(td.bs.oE)||0;for(var e=this.C.ps(td.bs.rE)||[],t=[],i=0;i<e.length;i++)t.push(G.Qn(e[i]));this.triggers=t,this.fg()}}gg(){var e=this,t=function(t,i,a,s,r){return function(){e.cg(t,i,a,s,r)}},i={};for(var a of this.triggers)a.id&&(i[a.id]=a);for(var s=!1,r=0;r<this.triggers.length;r++){var n=this.triggers[r];if(n.id&&null!=this.ng[n.id]){for(var o=this.ng[n.id],l=[],h=0;h<o.length;h++){var c=o[h],d=n.ud(c.pn||0);if(d>0){var p=void 0,b=void 0;l.push(c),null!=c.ug&&(p=c.ug),null!=c.dg&&u.AE(c.dg)&&(b=u.Qn(c.dg));var m=[];if(c.pg&&eR(c.pg))for(var g=0;g<c.pg.length;g++){var f=i[c.pg[g]];null!=f&&m.push(f)}this.eg.push(window.setTimeout(t(n,c.pn||0,p,b,m),d))}}this.ng[n.id].length>l.length&&(this.ng[n.id]=l,s=!0,0===this.ng[n.id].length&&delete this.ng[n.id])}}s&&this.C&&this.C.js(td.bs.iE,this.ng)}mg(){if(this.C){for(var e=[],t=0;t<this.triggers.length;t++)e.push(this.triggers[t].Bs());this.lg=new Date().valueOf(),this.C.js(td.bs.rE,e),this.C.js(td.bs.oE,this.lg)}}bg(){this.C&&((this.C.ps(td.bs.oE)||0)>this.lg?this.ag():this.fg())}U(e){var t=!1;if(null!=e&&e.triggers){this.ig.vn(),this.fg();var i,a={},s={};this.triggers=[];for(var r=0;r<e.triggers.length;r++){var n=G.fromJson(e.triggers[r]);if(n){n.id&&null!=this.og[n.id]&&(n.ad(this.og[n.id]),a[n.id]=this.og[n.id]),n.id&&null!=this.ng[n.id]&&(s[n.id]=this.ng[n.id]);for(var o=0;o<n.sd.length;o++)if(n.sd[o].kc(tI.Xt,null)){t=!0;break}this.triggers.push(n)}}eG(this.og,a)||(this.og=a,this.C&&this.C.js(td.bs.nE,this.og)),eG(this.ng,s)||(this.ng=s,this.C&&this.C.js(td.bs.iE,this.ng)),this.mg(),t&&(ea.info("Trigger with test condition found, firing test."),this.ue(tI.Xt)),this.ue(tI.OPEN);var l=this.sg;this.sg=[];for(var u=0;u<l.length;u++)i=Array.prototype.slice.call(l[u]),this.ue(...i)}}cg(e,t,i,a,s){var r,n,o,l=a=>{this.fg();var s=new Date().valueOf();e.dd(t)||(!1===navigator.onLine&&e.type===G.ln.an&&a.imageUrl?ea.info(`Not showing ${e.type} trigger action ${e.id} due to offline state.`):e.nd(s)&&this.wg(e,s,i)?0===this.Ms.ic()?ea.info(`Not displaying trigger ${e.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.Ms.X([a]),this.yg(e,s)):ea.info(`Not displaying trigger ${e.id} because display time fell outside of the acceptable time window.`))},u=()=>{this.fg();var r=s.pop();if(null!=r){if(this.Tg(r,t,i,a,s),r.dd(t)){var n=`Server aborted in-app message display, but the timeout on fallback trigger ${r.id} has already elapsed.`;s.length>0&&(n+=" Continuing to fall back."),ea.info(n),u()}else{ea.info(`Server aborted in-app message display. Falling back to lower priority ${r.type} trigger action ${e.id}.`);var o=1e3*r.ed-(new Date().valueOf()-t);o>0?this.eg.push(window.setTimeout(()=>{this.cg(r,t,i,a,s)},o)):this.cg(r,t,i,a,s)}}};switch(e.type){case G.ln.an:if(null==(r=tT(e.data))){ea.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}if(n=this.ig.Lr(r)){ea.error(n),u();break}l(r);break;case G.ln.md:if(null==(o=H.fromJson(e.data,l,u,t,e.mn||0))){ea.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}this.ig.Wr(o,i,a);break;default:ea.error(`Trigger ${e.id} was of unexpected type ${e.type}, ignoring.`)}}ue(e,t=null,i){if(eU(tI,e,"Cannot fire trigger action.","TriggerEvents")){if(this.Ue&&this.Ue.uc())return ea.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.bg();for(var a=new Date().valueOf(),s=a-(this.hg||0),r=!0,n=!0,o=[],l=0;l<this.triggers.length;l++){var u=this.triggers[l],h=a+1e3*u.ed;if(u.nd(h)&&(null==u.startTime||u.startTime.valueOf()<=a)&&(null==u.endTime||u.endTime.valueOf()>=a)){for(var c=!1,d=0;d<u.sd.length;d++)if(u.sd[d].kc(e,t)){c=!0;break}c&&(r=!1,this.wg(u,h,e)&&(n=!1,o.push(u)))}}if(r)return void ea.info(`Trigger event ${e} did not match any trigger conditions.`);if(n)return void ea.info(`Ignoring ${e} trigger event because a trigger was displayed ${s/1e3}s ago.`);o.sort((e,t)=>e.priority-t.priority);var p=o.pop();null!=p&&(ea.info(`Firing ${p.type} trigger action ${p.id} from trigger event ${e}.`),this.Tg(p,a,e,i,o),0===p.ed?this.cg(p,a,e,i,o):this.eg.push(window.setTimeout(()=>{this.cg(p,a,e,i,o)},1e3*p.ed)))}}changeUser(e=!1){if(this.triggers=[],this.C&&this.C.Ls(td.bs.rE),!e){this.sg=[],this.hg=null,this.og={},this.ng={};for(var t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[],this.C&&(this.C.Ls(td.bs.aE),this.C.Ls(td.bs.nE),this.C.Ls(td.bs.iE))}}clearData(){this.triggers=[],this.hg=null,this.og={},this.ng={};for(var e=0;e<this.eg.length;e++)clearTimeout(this.eg[e]);this.eg=[]}wg(e,t,i){if(null==this.hg)return!0;if(i===tI.Xt)return ea.info("Ignoring minimum interval between trigger because it is a test type."),!0;var a=e.hd;return null==a&&(a=this.tg),t-this.hg>=1e3*a}Tg(e,t,i,a,s){this.fg(),e.id&&(this.ng[e.id]=this.ng[e.id]||[]);var r,n={};n.pn=t,n.ug=i,null!=a&&(r=a.Bs()),n.dg=r;var o=[];for(var l of s)l.id&&o.push(l.id);n.pg=o,e.id&&this.ng[e.id].push(n),this.C&&this.C.js(td.bs.iE,this.ng)}yg(e,t){this.fg(),e.ad(t),this.hg=t,e.id&&(this.og[e.id]=t),this.C&&(this.C.js(td.bs.aE,t),this.C.js(td.bs.nE,this.og))}},Y=class e{constructor(e,t,i,a,s){this.endpoint=e,this.Ln=t,this.publicKey=i,this.Vl=a,this.El=s,this.endpoint=e||null,this.Ln=t||null,this.publicKey=i||null,this.Vl=a||null,this.El=s||null}Bs(){return{e:this.endpoint,c:this.Ln,p:this.publicKey,u:this.Vl,v:this.El}}static Qn(t){return new e(t.e,eJ(t.c),t.p,t.u,t.v)}},W=class{constructor(e,t){this.B=e,this.C=t,this.B=e,this.C=t}getUserId(){var e=this.C.tu(td.iu.su);if(null==e)return null;var t=e.eu,i=e5(t);if(i>c.mr){for(;i>c.mr;)i=e5(t=t.slice(0,t.length-1));e.eu=t,this.C.uu(td.iu.su,e)}return t}ou(e){var t=null==this.getUserId();this.C.uu(td.iu.su,new h(e)),t&&this.C.ru(e)}setCustomUserAttribute(e,t){if(this.B.hu(e))return ea.info('Custom Attribute "'+e+'" is blocklisted, ignoring.'),!1;var i={};return i[e]=t,this.nu(c.lu,i,!0)}nu(e,t,i=!1,a=!1){var s=this.C.mu(this.getUserId(),e,t),r="",n=e,o=t;return i&&(r=" custom","object"==typeof t&&(n=Object.keys(t)[0],"object"==typeof(o=t[n])&&(o=JSON.stringify(o,null,2)))),!a&&s&&ea.info(`Logged${r} attribute ${n} with value ${o}`),s}En(e,t,a,s,r){this.nu("push_token",e,!1,!0),this.nu("custom_push_public_key",a,!1,!0),this.nu("custom_push_user_auth",s,!1,!0),this.nu("custom_push_vapid_public_key",r,!1,!0);var n=i.Gs._s,o=new i(n,ea),l=new Y(e,t,a,s,r);this.C.js(td.bs.Kn,l.Bs()),o.setItem(n.Os.cu,n.oe,!0)}Cn(e){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),e){var t=i.Gs._s,a=new i(t,ea);this.C.js(td.bs.Kn,!1),a.setItem(t.Os.cu,t.oe,!1)}}},ef=new class{constructor(){this.yn="",this.Vh="",this.$h=void 0,this.Yh=null,this.wn=null,this.S=null,this.Ue=null,this.B=null,this.T=null,this.C=null,this.As=null,this.Xh="",this.isInitialized=!1,this.Zh=!1,this.Qh=new a,this.Ia=new a,this.options={},this.Na=[],this.Oa=[],this.Ir=[],this.Vh="5.6.0"}Ta(e){this.Qh.Ns(e)}Nh(e){this.Ia.Ns(e)}initialize(e,t){if(this.nt())return ea.info("Braze has already been initialized with an API key."),!0;this.options=t||{};var i=this.sr(t8.Vo),s=tX(ep.Ra());if(s&&"true"===s.brazeLogging&&(i=!0),ea.init(i),ea.info(`Initialization Options: ${JSON.stringify(this.options,null,2)}`),null==e||""===e||"string"!=typeof e)return ea.error("Braze requires a valid API key to be initialized."),!1;this.yn=e;var r=this.sr(t8.Ro);if(null==r||""===r||"string"!=typeof r)return ea.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(r)&&(r=`https://${r}`);var n=r;if((r=document.createElement("a")).href=n,"/"===r.pathname&&(r=`${r}api/v3`),this.Xh=r.toString(),eo.Pa&&!this.sr(t8.Oo))return ea.info("Ignoring activity from crawler bot "+navigator.userAgent),this.Zh=!0,!1;var o=this.sr(t8.Lo)||!1;if(this.C=ec.La(e,o),o&&this.C.Ua(e),new g.ne(null,!0).gr(td.ae))return ea.info("Ignoring all activity due to previous opt out"),this.Zh=!0,!1;for(var l of e$(this.options))-1===eP(eB).indexOf(l)&&ea.warn(`Ignoring unknown initialization option '${l}'.`);if(null!=this.sr(t8.Wh)){var u=this.sr(t8.Wh);-1!==["mparticle","wordpress","tealium"].indexOf(u)?this.$h=u:ea.error("Invalid sdk flavor passed: "+u)}var c=this.sr(eB.Wo);if(null!=c){if(eR(c)){for(var d=[],p=0;p<c.length;p++)eU(tp,c[p],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&d.push(c[p]);c=d}else ea.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),c=null}var b=this.sr(t8.Qo);if(b){var m=new h(b);this.C.uu(td.iu.Qo,m)}this.wn=new x(this.C,c),this.B=new k(this.C),this.As=new W(this.B,this.C),this.T=new A(this.C,this.As,this.B,this.sr(t8.Yo));var v=new a;return this.Yh=new f(this.C,this.sr(t8.Ko),v),this.N(v),this.S=new y(this.wn,this.C,this.Yh,this.As,this.T,this.B,this.yn,this.Xh,this.Vh,this.$h||"",this.sr(t8.Ho),this.sr(t8.Xo)),this.Ue=new S(this.yn,this.Xh,this.T,this.wn,this.As,this.B,this.C,e=>{if(this.nt())for(var t of this.lr())t.U(e)},this.Yh,this.S),this.Ue.initialize(),o||this.C.Wa(),ea.info(`Initialized for the Braze backend at "${this.sr(t8.Ro)}" with API key "${this.yn}".`),t4.p(),this.B.Re(()=>{var e;this.isInitialized&&(null===(e=this.B)||void 0===e?void 0:e.Qi())&&Promise.resolve().then(function(){return eO}).then(e=>{this.isInitialized&&(0,e.default)()})}),this.Ue.rn(()=>{var e;this.isInitialized&&(null===(e=this.B)||void 0===e?void 0:e.Qi())&&Promise.resolve().then(function(){return eO}).then(e=>{this.isInitialized&&(0,e.default)(void 0,void 0,!0)})}),this.Qh.X(this.options),this.isInitialized=!0,window.dispatchEvent(new CustomEvent("braze.initialized")),!0}destroy(e){if(ea.destroy(),this.nt()){for(var t of(this.Ia.X(),this.Ia.removeAllSubscriptions(),this.Na))t.destroy();for(var i of(this.Na=[],this.Oa))i.clearData(!1);this.Oa=[],this.removeAllSubscriptions(),this.Ir=[],null!=this.Ue&&this.Ue.destroy(),this.Ue=null,this.Yh=null,this.wn=null,this.S=null,this.B=null,this.T=null,this.As=null,this.options={},this.$h=void 0,this.isInitialized=!1,this.Zh=!1,e&&(this.C=null)}}rr(){return!this.Va()&&!!this.nt()}Ma(){return this.yn}Sr(){return this.Yh}Z(){return this.Xh}te(){return this.wn}g(){return this.S}sr(e){return this.options[e]}lr(){return this.Oa}nn(){return this.Ue}v(){return this.B}P(){return this.T}j(){return this.C}cr(){if(this.As&&this.Ue)return new c(this.As,this.Ue)}tr(){return this.As}nr(){return!0===this.sr(t8.er)}h(e){var t=!1;for(var i of this.Na)i===e&&(t=!0);t||this.Na.push(e)}_(e){var t=!1;for(var i of this.Oa)i.constructor===e.constructor&&(t=!0);e instanceof v&&!t&&this.Oa.push(e)}N(e){e instanceof a&&this.Ir.push(e)}removeAllSubscriptions(){if(this.rr())for(var e of this.Ir)e.removeAllSubscriptions()}removeSubscription(e){if(this.rr())for(var t of this.Ir)t.removeSubscription(e)}re(e){this.Zh=e}nt(){return this.isInitialized}Va(){return this.Zh}Ui(){return this.Vh}},ev=t7,K=class{constructor(e){this.C=e,this.C=e}logClick(e,t){var i=new E;if(e.rt(),null==e.url||""===e.url)return ea.info(`Card ${e.id} has no url. Not logging click to Braze servers.`),i;if(t&&e.id&&this.C){var a=this.C.ps(td.bs.ot)||{};a[e.id]=!0,this.C.js(td.bs.ot,a)}var s=this.et([e]);if(null==s)return i;var r=t?eq.lt:eq.ut;return ev.ds(r,s)}ct(e){var t=new E;if(!e.ft())return ea.info(`Card ${e.id} refused this dismissal. Ignoring analytics event.`),t;if(e.id&&this.C){var i=this.C.ps(td.bs.gt)||{};i[e.id]=!0,this.C.js(td.bs.gt,i)}var a=this.et([e]);return null==a?t:ev.ds(eq.dt,a)}jt(e,t){var i=new E(!0),a=[],s=[],r={};for(var n of(this.C&&(r=t?this.C.ps(td.bs.vt)||{}:this.C.ps(td.bs.Ct)||{}),e))n.wt()?(n instanceof l?s.push(n):a.push(n),n.id&&(r[n.id]=!0)):ea.info(`Card ${n.id} logged an impression too recently. Ignoring analytics event.`);var o=this.et(a),u=this.et(s);if(null==o&&null==u)return i.ss=!1,i;if(this.C&&(t?this.C.js(td.bs.vt,r):this.C.js(td.bs.Ct,r)),null!=o){var h=t?eq.xt:eq.yt,c=ev.ds(h,o);i.It(c)}if(null!=u&&t){var d=ev.ds(eq.$t,u);i.It(d)}return i}et(e){for(var t,i=null,a=0;a<e.length;a++)null!=(t=e[a].id)&&""!==t&&((i=i||{}).ids=i.ids||[],i.ids.push(t));return i}},ew=t6,V=class{constructor(e,t){this.cards=e,this.lastUpdated=t,this.cards=e,this.lastUpdated=t}getUnreadCardCount(){var e=0;for(var t of this.cards)t.viewed||t instanceof l||e++;return e}ur(){ea.error("Must be implemented in a subclass")}logCardImpressions(e){ea.error("Must be implemented in a subclass")}logCardClick(e){ea.error("Must be implemented in a subclass")}dr(){ea.error("Must be implemented in a subclass")}},V.ar=6e4,V.Ih=500,V.No=1e4,ex=Object.freeze({__proto__:null,changeUser:id}),ey=Object.freeze({__proto__:null,logCustomEvent:im}),eE=Object.freeze({__proto__:null,logPurchase:ig}),eS=Object.freeze({__proto__:null,requestImmediateDataFlush:iw}),Q=class extends v{constructor(e,t){super(),this.C=e,this.Ue=t,this.cards=[],this.Ae=null,this.C=e,this.Ue=t,this.Ms=new a,ef.N(this.Ms),this.Xs()}Xs(){var e=[];this.C&&(e=this.C.ps(td.bs.Be)||[]);for(var t=[],i=0;i<e.length;i++){var a,r=ii((a=e[i])[s.qt.Et],a[s.qt.zt],a[s.qt.Ft],a[s.qt.Gt],a[s.qt.Jt],a[s.qt.Kt],eJ(a[s.qt.Mt]),eJ(a[s.qt.Lt]),a[s.qt.Nt],eJ(a[s.qt.Ot]),a[s.qt.URL],a[s.qt.Pt],a[s.qt.Qt],a[s.qt.St],a[s.qt.Ut],a[s.qt.Vt],a[s.qt.Wt],a[s.qt.Xt]||!1)||void 0;null!=r&&t.push(r)}this.cards=t,this.C&&(this.Ae=eJ(this.C.ps(td.bs.Ge)))}He(e){var t=[],i={};this.C&&(i=this.C.ps(td.bs.Ct)||{});for(var a={},s=0;s<e.length;s++){var r,n=ii((r=e[s]).id,r.type,r.viewed,r.title,r.image,r.description,eX(r.created),eX(r.updated),r.categories,eX(r.expires_at),r.url,r.domain,r.aspect_ratio,r.extras,!1,!1);if(null!=n){var o=n.id;o&&i[o]&&(n.viewed=!0,a[o]=!0),t.push(n)}}this.cards=t,this.Ri(),this.Ae=new Date,this.C&&(this.C.js(td.bs.Ct,a),this.C.js(td.bs.Ge,this.Ae))}Ri(){for(var e,t=[],i=0;i<this.cards.length;i++)t.push(this.cards[i].Bs());null===(e=this.C)||void 0===e||e.js(td.bs.Be,t)}U(e){null!=e&&e.feed&&(this.Xs(),this.He(e.feed),this.Ms.X(new Z(this.cards.slice(),this.Ae)))}Je(){this.Xs();for(var e=[],t=new Date,i=0;i<this.cards.length;i++){var a=this.cards[i].expiresAt,s=!0;null!=a&&(s=a>=t),s&&e.push(this.cards[i])}return new Z(e,this.Ae)}zi(){this.Ue&&this.Ue.requestFeedRefresh()}Fs(e){return this.Ms.Ns(e)}clearData(e){null==e&&(e=!1),this.cards=[],this.Ae=null,e&&this.C&&(this.C.Ls(td.bs.Be),this.C.Ls(td.bs.Ge)),this.Ms.X(new Z(this.cards.slice(),this.Ae))}},eC=ix,e("Feed",Z=class extends V{constructor(e,t){super(e,t)}logCardImpressions(e){it(e,!1)}logCardClick(e){return t9(e,!1)}dr(){iy()}ur(){return!1}}),ek=Object.freeze({__proto__:null,showFeed:iS}),(ee=class e{constructor(e,t,i,a,s,r,n,o,l,u,h){this.bn=e,this.yn=t,this.wn=i,this.kn=s,this.Pn=r,this.Dn=n,this.B=o,this.Sn=l,this.An=u,this.C=h,this.bn=e,this.yn=t,this.wn=i,this.xn=a+"/safari/"+t,this.kn=s||"/service-worker.js",this.Dn=n,this.B=o,this.Sn=l||!1,this.An=u||!1,this.C=h,this.Nn=eh.Un(),this.Wn=eh._n()}Tn(){return this.An}In(e,t,i,a,s){e.unsubscribe().then(e=>{e?this.Vn(t,i,a,s):(ea.error("Failed to unsubscribe device from push."),"function"==typeof s&&s(!1))}).catch(e=>{ea.error("Push unsubscription error: "+e),"function"==typeof s&&s(!1)})}qn(e,t,i){var a,s,r=(e=>{if("string"==typeof e)return e;if(0!==e.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return e.endpoint;var t=e.endpoint;return e.zn&&-1===e.endpoint.indexOf(e.zn)&&(t=e.endpoint+"/"+e.zn),t})(e),n=null,o=null;if(null!=e.getKey)try{var l=Array.from(new Uint8Array(e.getKey("p256dh"))),u=Array.from(new Uint8Array(e.getKey("auth")));n=btoa(String.fromCharCode.apply(null,l)),o=btoa(String.fromCharCode.apply(null,u))}catch(e){ea.error(e3(e))}var h=e.options&&(a=e.options.applicationServerKey)&&a.byteLength&&a.byteLength>0?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(a)))).replace(/\+/g,"-").replace(/\//g,"_"):null;null===(s=this.bn)||void 0===s||s.En(r,t,n,o,h),r&&"function"==typeof i&&i(r,n,o)}Rn(){var e;null===(e=this.bn)||void 0===e||e.Cn(!0)}Fn(e,t){var i;null===(i=this.bn)||void 0===i||i.Cn(!1),ea.info(e),"function"==typeof t&&t(!1)}On(e,t,i,a){var s;if("default"===t.permission)try{window.safari.pushNotification.requestPermission(this.xn,e,{api_key:this.yn,device_id:(null===(s=this.wn)||void 0===s?void 0:s.ce().id)||""},t=>{"granted"===t.permission&&this.bn&&this.bn.setPushNotificationSubscriptionType(c.NotificationSubscriptionTypes.OPTED_IN),this.On(e,t,i,a)})}catch(e){this.Fn("Could not request permission for push: "+e,a)}else"denied"===t.permission?this.Fn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",a):"granted"===t.permission&&(ea.info("Device successfully subscribed to push."),this.qn(t.deviceToken,new Date,i))}requestPermission(e,t,i){var a=a=>{switch(a){case"granted":return void("function"==typeof e&&e());case"default":return void("function"==typeof t&&t());case"denied":return void("function"==typeof i&&i());default:ea.error("Received unexpected permission result "+a)}},s=!1;if("default"!==window.Notification.permission)a(Notification.permission);else{var r=window.Notification.requestPermission(e=>{s&&a(e)});r?r.then(e=>{a(e)}):s=!0}}Vn(e,t,i,a){var s={userVisibleOnly:!0};null!=t&&(s.applicationServerKey=t),e.pushManager.subscribe(s).then(e=>{ea.info("Device successfully subscribed to push."),this.qn(e,new Date,i)}).catch(e=>{eh.isPushBlocked()?(ea.info("Permission for push notifications was denied."),"function"==typeof a&&a(!1)):(ea.error("Push subscription failed: "+e),"function"==typeof a&&a(!0))})}Bn(){if(this.Sn)return navigator.serviceWorker.getRegistration(this.kn);var e=this.Pn?{scope:this.Pn}:void 0;return navigator.serviceWorker.register(this.kn,e).then(()=>navigator.serviceWorker.ready.then(e=>(e&&"function"==typeof e.update&&e.update().catch(e=>{ea.info("ServiceWorker update failed: "+e)}),e)))}Mn(e){this.Sn||(e.unregister(),ea.info("Service worker successfully unregistered."))}subscribe(t,i){if(!eh.isPushSupported())return ea.info(e.Yn),void("function"==typeof i&&i(!1));if(this.Nn){if(!this.Sn&&null!=window.location){var a=this.kn;-1===a.indexOf(window.location.host)&&(a=window.location.host+a),-1===a.indexOf(window.location.protocol)&&(a=window.location.protocol+"//"+a)}if(eh.isPushBlocked())return void this.Fn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",i);if(this.B&&!this.B.Gn()&&0===this.B.Es())return ea.info("Waiting for VAPID key from server config before subscribing to push."),void this.B.Hn(()=>{this.subscribe(t,i)});var s=eh.isPushPermissionGranted();this.requestPermission(()=>{!s&&this.bn&&this.bn.setPushNotificationSubscriptionType(c.NotificationSubscriptionTypes.OPTED_IN),this.Bn().then(e=>{if(null==e)return ea.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof i&&i(!0));e.pushManager.getSubscription().then(a=>{var s=null;if(null!=(null===(r=this.B)||void 0===r?void 0:r.Gn())&&(s=es.Jn(this.B.Gn())),a){var r,n,o,l=null,u=null;if(this.C&&(o=this.C.ps(td.bs.Kn)),o&&!eR(o)){try{n=Y.Qn(o).Ln}catch(e){n=null}null==n||isNaN(n.getTime())||0===n.getTime()||(u=new Date(l=n)).setMonth(l.getMonth()+6)}null!=s&&a.options&&a.options.applicationServerKey&&a.options.applicationServerKey.byteLength&&a.options.applicationServerKey.byteLength>0&&!eG(s,new Uint8Array(a.options.applicationServerKey))?(a.options.applicationServerKey.byteLength>12?ea.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):ea.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.In(a,e,s,t,i)):a.expirationTime&&new Date(a.expirationTime).valueOf()<=new Date().valueOf()?(ea.info("Push subscription is expired, creating new subscription."),this.In(a,e,s,t,i)):o&&eR(o)?this.In(a,e,s,t,i):null==u?(ea.info("No push subscription creation date found, creating new subscription."),this.In(a,e,s,t,i)):u.valueOf()<=new Date().valueOf()?(ea.info("Push subscription older than 6 months, creating new subscription."),this.In(a,e,s,t,i)):(ea.info("Device already subscribed to push, sending existing subscription to backend."),this.qn(a,l,t))}else this.Vn(e,s,t,i)}).catch(e=>{ea.error("Error checking current push subscriptions: "+e)})}).catch(e=>{ea.error("ServiceWorker registration failed: "+e)})},()=>{var e="Permission for push notifications was ignored.";eh.isPushBlocked()&&(e+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),ea.info(e),"function"==typeof i&&i(!0)},()=>{ea.info("Permission for push notifications was denied."),"function"==typeof i&&i(!1)})}else if(this.Wn){if(null==this.Dn||""===this.Dn)return ea.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof i&&i(!0));var r=window.safari.pushNotification.permission(this.Dn);this.On(this.Dn,r,t,i)}}unsubscribe(t,i){if(!eh.isPushSupported())return ea.info(e.Yn),void("function"==typeof i&&i());this.Nn?navigator.serviceWorker.getRegistration(this.kn).then(e=>{e?e.pushManager.getSubscription().then(a=>{a?(this.Rn(),a.unsubscribe().then(a=>{a?(ea.info("Device successfully unsubscribed from push."),"function"==typeof t&&t()):(ea.error("Failed to unsubscribe device from push."),"function"==typeof i&&i()),this.Mn(e)}).catch(e=>{ea.error("Push unsubscription error: "+e),"function"==typeof i&&i()})):(ea.info("Device already unsubscribed from push."),"function"==typeof t&&t())}).catch(e=>{ea.error("Error unsubscribing from push: "+e),"function"==typeof i&&i()}):(ea.info("Device already unsubscribed from push."),"function"==typeof t&&t())}):this.Wn&&(this.Rn(),ea.info("Device unsubscribed from push."),"function"==typeof t&&t())}}).Yn="Push notifications are not supported in this browser.",eA=Object.freeze({__proto__:null,default:ik}),eN=Object.freeze({__proto__:null,requestPushPermission:iA}),e_=Object.freeze({__proto__:null,unregisterPush:iN}),e("FeatureFlag",et=class e{constructor(e,t=!1,i={},a){this.id=e,this.enabled=t,this.properties=i,this.trackingString=a,this.id=e,this.enabled=t,this.properties=i,this.trackingString=a}he(e,t,i){var a=this.properties[e];return null==a?(this.ye(e),null):t(a)?a.value:(this.Pe(i),null)}getStringProperty(e){return this.he(e,this.be,"string")}getNumberProperty(e){return this.he(e,this.Ie,"number")}getBooleanProperty(e){return this.he(e,this.de,"boolean")}getImageProperty(e){return this.he(e,this.Te,"image")}getJsonProperty(e){return this.he(e,this.Ee,"jsonobject")}getTimestampProperty(e){return this.he(e,this.Ne,"datetime")}Bs(){var t={};return t[e.qt.Et]=this.id,t[e.qt.le]=this.enabled,t[e.qt.pe]=this.properties,t[e.qt.Fe]=this.trackingString,t}Pe(e){ea.info(`Property is not of type ${e}.`)}ye(e){ea.info(`${e} not found in feature flag properties.`)}be(e){return"string"===e.type&&"string"==typeof e.value}Ie(e){return"number"===e.type&&"number"==typeof e.value}de(e){return"boolean"===e.type&&"boolean"==typeof e.value}Te(e){return"image"===e.type&&"string"==typeof e.value}Ee(e){return"jsonobject"===e.type&&"object"==typeof e.value&&e.value.constructor==Object}Ne(e){return"datetime"===e.type&&"number"==typeof e.value}}),et.qt={Et:"id",le:"e",pe:"pr",Fe:"fts"},et.li={Et:"id",le:"enabled",pe:"properties",Fe:"fts"},ei=class extends v{constructor(e,t,i,s){super(),this.B=e,this.S=t,this.C=i,this.T=s,this.Gi=[],this.Hi=0,this.B=e,this.S=t,this.C=i,this.T=s,this.Ki=null,this.Oi=new a,this.R=10,this.I=null,this.q=null,ef.N(this.Oi)}U(e){var t;if((null===(t=this.B)||void 0===t?void 0:t.Qi())&&null!=e&&e.feature_flags){for(var i of(this.Gi=[],e.feature_flags)){var a=function(e){if(e[et.li.Et]&&"boolean"==typeof e[et.li.le])return new et(e[et.li.Et],e[et.li.le],e[et.li.pe],e[et.li.Fe]);ea.info(`Unable to create feature flag from ${JSON.stringify(e,null,2)}`)}(i);a&&this.Gi.push(a)}this.Hi=new Date().getTime(),this.Vi(),this.Oi.X(this.Gi)}}Wi(){var e={};this.C&&(e=this.C.ps(td.bs.Yi));var t={};for(var i in e){var a=function(e){if(e[et.qt.Et]&&"boolean"==typeof e[et.qt.le])return new et(e[et.qt.Et],e[et.qt.le],e[et.qt.pe],e[et.qt.Fe]);ea.info(`Unable to deserialize feature flag from ${JSON.stringify(e,null,2)}`)}(e[i]);a&&(t[a.id]=a)}return t}Zi(){var e;return(null===(e=this.C)||void 0===e?void 0:e.ps(td.bs.we))||{}}je(e){this.C&&this.C.js(td.bs.we,e)}Fs(e){return this.Oi.Ns(e)}refreshFeatureFlags(e,t,i=!1,a=!0){var s=()=>{"function"==typeof t&&t(),this.Oi.X(this.Gi)};if(!this.Ce(i))return!this.Ki&&this.B&&(this.Ki=this.B.Re(()=>{this.refreshFeatureFlags(e,t)})),void s();var r=this.S;if(!r)return void s();a&&this.G();var n=r.H({},!0),o=r.J(n,el.O.De),l=!1;r.V(n,(r=-1)=>{if(!this.S)return void s();var u=new Date().valueOf();el.W(this.C,el.O.De,u),-1!==r&&o.push(["X-Braze-Req-Tokens-Remaining",r.toString()]),eu.Y({url:`${this.S.Z()}/feature_flags/sync`,headers:o,data:n,ss:t=>{if(!this.S.ts(n,t,o))return l=!0,void s();this.S.es(),this.U(t),l=!1,el.ns(this.C,el.O.De,1),"function"==typeof e&&e()},error:e=>{this.S.rs(e,"retrieving feature flags"),l=!0,s()},os:()=>{if(a&&l&&!this.q){el.hs(this.C,el.O.De);var s=this.I;(null==s||s<1e3*this.R)&&(s=1e3*this.R),this.ls(Math.min(3e5,tf(1e3*this.R,3*s)),e,t,i)}}})},el.O.De,t)}G(){null!=this.q&&(clearTimeout(this.q),this.q=null)}ls(e=1e3*this.R,t,i,a=!1){this.G(),this.q=window.setTimeout(()=>{this.refreshFeatureFlags(t,i,a)},e),this.I=e}Ce(e){if(!this.B)return!1;if(!e){var t=this.B.Se();if(null==t)return!1;var i=!1;if(!isNaN(t)){if(-1===t)return ea.info("Feature flag refreshes not allowed"),!1;i=new Date().getTime()>=(this.Hi||0)+1e3*t}if(!i)return ea.info(`Feature flag refreshes were rate limited to ${t} seconds`),!1}return this.B.Qi()}qe(){var e;return(null===(e=this.C)||void 0===e?void 0:e.ps(td.bs.xe))||null}ze(){var e,t;null===(e=this.C)||void 0===e||e.js(td.bs.xe,null===(t=this.T)||void 0===t?void 0:t.Ss())}$e(){var e,t=null===(e=this.T)||void 0===e?void 0:e.Ss(),i=this.qe();return null==i||t===i}Vi(){if(this.C){var e={};for(var t of this.Gi){var i=t.Bs();e[t.id]=i}this.C.js(td.bs.Yi,e),this.C.js(td.bs.ke,this.Hi),this.ze()}}},eT=i_,eO=Object.freeze({__proto__:null,default:iT,refreshFeatureFlags:iO}),e({CaptionedImage:n,Card:s,ClassicCard:o,ControlCard:l,ControlMessage:N,DeviceProperties:tp,FeatureFlag:et,Feed:Z,FullScreenMessage:I,HtmlMessage:T,ImageOnly:r,InAppMessage:_,InAppMessageButton:O,ModalMessage:D,SlideUpMessage:q,User:c,WindowUtils:ep,changeUser:id,destroy:ip,getUser:tG,initialize:ib,logCardClick:t9,logCardDismissal:ie,logCardImpressions:it,logCustomEvent:im,logFeedDisplayed:iE,logInAppMessageButtonClick:tQ,logInAppMessageClick:tP,logInAppMessageHtmlClick:tJ,logInAppMessageImpression:tB,logPurchase:ig,openSession:iv,refreshFeatureFlags:iO,removeSubscription:is,requestFeedRefresh:iy,requestImmediateDataFlush:iw,requestPushPermission:iA,showFeed:iS,showInAppMessage:t3,subscribeToFeedUpdates:iC,subscribeToInAppMessage:t5,unregisterPush:iN})},[]]},[]]);
